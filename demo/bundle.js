!function t(e,r,i){function n(o,a){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){e.exports={default:t("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":11}],2:[function(t,e,r){e.exports={default:t("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":12}],3:[function(t,e,r){e.exports={default:t("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":13}],4:[function(t,e,r){e.exports={default:t("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":14}],5:[function(t,e,r){e.exports={default:t("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":15}],6:[function(t,e,r){"use strict";r.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r.__esModule=!0},{}],7:[function(t,e,r){"use strict";var i=t("babel-runtime/core-js/object/define-property").default;r.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),i(t,n.key,n)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),r.__esModule=!0},{"babel-runtime/core-js/object/define-property":2}],8:[function(t,e,r){"use strict";var i=t("babel-runtime/core-js/object/get-own-property-descriptor").default;r.default=function(t,e,r){for(var n=!0;n;){var s=t,o=e,a=r;u=c=h=void 0,n=!1;var u=i(s,o);if(void 0!==u){if("value"in u)return u.value;var h=u.get;return void 0===h?void 0:h.call(a)}var c=Object.getPrototypeOf(s);if(null===c)return void 0;t=c,e=o,r=a,n=!0}},r.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":3}],9:[function(t,e,r){"use strict";var i=t("babel-runtime/core-js/object/create").default;r.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=i(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},r.__esModule=!0},{"babel-runtime/core-js/object/create":1}],10:[function(t,e,r){"use strict";r.default=function(t){return t&&t.__esModule?t:{default:t}},r.__esModule=!0},{}],11:[function(t,e,r){var i=t("../../modules/$");e.exports=function(t,e){return i.create(t,e)}},{"../../modules/$":30}],12:[function(t,e,r){var i=t("../../modules/$");e.exports=function(t,e,r){return i.setDesc(t,e,r)}},{"../../modules/$":30}],13:[function(t,e,r){var i=t("../../modules/$");t("../../modules/es6.object.statics-accept-primitives"),e.exports=function(t,e){return i.getDesc(t,e)}},{"../../modules/$":30,"../../modules/es6.object.statics-accept-primitives":44}],14:[function(t,e,r){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.promise"),e.exports=t("../modules/$").core.Promise},{"../modules/$":30,"../modules/es6.object.to-string":45,"../modules/es6.promise":46,"../modules/es6.string.iterator":47,"../modules/web.dom.iterable":49}],15:[function(t,e,r){t("../../modules/es6.symbol"),e.exports=t("../../modules/$").core.Symbol},{"../../modules/$":30,"../../modules/es6.symbol":48}],16:[function(t,e,r){function i(t,e,r){if(!t)throw TypeError(r?e+r:e)}var n=t("./$");i.def=n.assertDefined,i.fn=function(t){if(!n.isFunction(t))throw TypeError(t+" is not a function!");return t},i.obj=function(t){if(!n.isObject(t))throw TypeError(t+" is not an object!");return t},i.inst=function(t,e,r){if(!(t instanceof e))throw TypeError(r+": use the 'new' operator!");return t},e.exports=i},{"./$":30}],17:[function(t,e,r){function i(t){return o.call(t).slice(8,-1)}var n=t("./$"),s=t("./$.wks")("toStringTag"),o={}.toString;i.classof=function(t){var e,r;return void 0==t?void 0===t?"Undefined":"Null":"string"==typeof(r=(e=Object(t))[s])?r:i(e)},i.set=function(t,e,r){t&&!n.has(t=r?t:t.prototype,s)&&n.hide(t,s,e)},e.exports=i},{"./$":30,"./$.wks":42}],18:[function(t,e,r){var i=t("./$.assert").fn;e.exports=function(t,e,r){if(i(t),~r&&void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},{"./$.assert":16}],19:[function(t,e,r){function i(t,e){return function(){return t.apply(e,arguments)}}function n(t,e,r){var s,h,c,l,p=t&n.G,f=t&n.P,d=p?o:t&n.S?o[e]:(o[e]||{}).prototype,m=p?a:a[e]||(a[e]={});p&&(r=e);for(s in r)h=!(t&n.F)&&d&&s in d,h&&s in m||(c=h?d[s]:r[s],p&&!u(d[s])?l=r[s]:t&n.B&&h?l=i(c,o):t&n.W&&d[s]==c?!function(t){l=function(e){return this instanceof t?new t(e):t(e)},l.prototype=t.prototype}(c):l=f&&u(c)?i(Function.call,c):c,m[s]=l,f&&((m.prototype||(m.prototype={}))[s]=c))}var s=t("./$"),o=s.g,a=s.core,u=s.isFunction;n.F=1,n.G=2,n.S=4,n.P=8,n.B=16,n.W=32,e.exports=n},{"./$":30}],20:[function(t,e,r){var i=t("./$"),n=i.g.document,s=i.isObject,o=s(n)&&s(n.createElement);e.exports=function(t){return o?n.createElement(t):{}}},{"./$":30}],21:[function(t,e,r){var i=t("./$");e.exports=function(t){var e=i.getKeys(t),r=i.getDesc,n=i.getSymbols;return n&&i.each.call(n(t),function(i){r(t,i).enumerable&&e.push(i)}),e}},{"./$":30}],22:[function(t,e,r){var i=t("./$.ctx"),n=t("./$.iter").get,s=t("./$.iter-call");e.exports=function(t,e,r,o){for(var a,u=n(t),h=i(r,o,e?2:1);!(a=u.next()).done;)if(s(u,h,a.value,e)===!1)return s.close(u)}},{"./$.ctx":18,"./$.iter":29,"./$.iter-call":26}],23:[function(t,e,r){e.exports=function(t){return t.FW=!1,t.path=t.core,t}},{}],24:[function(t,e,r){function i(t){try{return o(t)}catch(t){return a.slice()}}var n=t("./$"),s={}.toString,o=n.getNames,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.get=function(t){return a&&"[object Window]"==s.call(t)?i(t):o(n.toObject(t))}},{"./$":30}],25:[function(t,e,r){e.exports=function(t,e,r){var i=void 0===r;switch(e.length){case 0:return i?t():t.call(r);case 1:return i?t(e[0]):t.call(r,e[0]);case 2:return i?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3]);case 5:return i?t(e[0],e[1],e[2],e[3],e[4]):t.call(r,e[0],e[1],e[2],e[3],e[4])}return t.apply(r,e)}},{}],26:[function(t,e,r){function i(t){var e=t.return;void 0!==e&&s(e.call(t))}function n(t,e,r,n){try{return n?e(s(r)[0],r[1]):e(r)}catch(e){throw i(t),e}}var s=t("./$.assert").obj;n.close=i,e.exports=n},{"./$.assert":16}],27:[function(t,e,r){var i=t("./$.def"),n=t("./$.redef"),s=t("./$"),o=t("./$.cof"),a=t("./$.iter"),u=t("./$.wks")("iterator"),h="@@iterator",c="keys",l="values",p=a.Iterators;e.exports=function(t,e,r,f,d,m,_){function g(t){function e(e){return new r(e,t)}switch(t){case c:return function(){return e(this)};case l:return function(){return e(this)}}return function(){return e(this)}}a.create(r,e,f);var y,v,b=e+" Iterator",w=t.prototype,x=w[u]||w[h]||d&&w[d],E=x||g(d);if(x){var T=s.getProto(E.call(new t));o.set(T,b,!0),s.FW&&s.has(w,h)&&a.set(T,s.that)}if((s.FW||_)&&a.set(w,E),p[e]=E,p[b]=s.that,d)if(y={keys:m?E:g(c),values:d==l?E:g(l),entries:d!=l?E:g("entries")},_)for(v in y)v in w||n(w,v,y[v]);else i(i.P+i.F*a.BUGGY,e,y)}},{"./$":30,"./$.cof":17,"./$.def":19,"./$.iter":29,"./$.redef":33,"./$.wks":42}],28:[function(t,e,r){var i=t("./$.wks")("iterator"),n=!1;try{var s=[7][i]();s.return=function(){n=!0},Array.from(s,function(){throw 2})}catch(t){}e.exports=function(t){if(!n)return!1;var e=!1;try{var r=[7],s=r[i]();s.next=function(){e=!0},r[i]=function(){return s},t(r)}catch(t){}return e}},{"./$.wks":42}],29:[function(t,e,r){"use strict";function i(t,e){n.hide(t,h,e),c in[]&&n.hide(t,c,e)}var n=t("./$"),s=t("./$.cof"),o=s.classof,a=t("./$.assert"),u=a.obj,h=t("./$.wks")("iterator"),c="@@iterator",l=t("./$.shared")("iterators"),p={};i(p,n.that),e.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:l,step:function(t,e){return{value:e,done:!!t}},is:function(t){var e=Object(t),r=n.g.Symbol;return(r&&r.iterator||c)in e||h in e||n.has(l,o(e))},get:function(t){var e,r=n.g.Symbol;return void 0!=t&&(e=t[r&&r.iterator||c]||t[h]||l[o(t)]),a(n.isFunction(e),t," is not iterable!"),u(e.call(t))},set:i,create:function(t,e,r,i){t.prototype=n.create(i||p,{next:n.desc(1,r)}),s.set(t,e+" Iterator")}}},{"./$":30,"./$.assert":16,"./$.cof":17,"./$.shared":36,"./$.wks":42}],30:[function(t,e,r){"use strict";function i(t){return isNaN(t=+t)?0:(t>0?m:d)(t)}function n(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function s(t,e,r){return t[e]=r,t}function o(t){return y?function(e,r,i){return b.setDesc(e,r,n(t,i))}:s}function a(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function u(t){return"function"==typeof t}function h(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}var c="undefined"!=typeof self?self:Function("return this")(),l={},p=Object.defineProperty,f={}.hasOwnProperty,d=Math.ceil,m=Math.floor,_=Math.max,g=Math.min,y=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(t){}}(),v=o(1),b=e.exports=t("./$.fw")({g:c,core:l,html:c.document&&document.documentElement,isObject:a,isFunction:u,that:function(){return this},toInteger:i,toLength:function(t){return t>0?g(i(t),9007199254740991):0},toIndex:function(t,e){return t=i(t),0>t?_(t+e,0):g(t,e)},has:function(t,e){return f.call(t,e)},create:Object.create,getProto:Object.getPrototypeOf,DESC:y,desc:n,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:h,ES5Object:Object,toObject:function(t){return b.ES5Object(h(t))},hide:v,def:o(0),set:c.Symbol?s:v,each:[].forEach});"undefined"!=typeof __e&&(__e=l),"undefined"!=typeof __g&&(__g=c)},{"./$.fw":23}],31:[function(t,e,r){var i=t("./$");e.exports=function(t,e){for(var r,n=i.toObject(t),s=i.getKeys(n),o=s.length,a=0;o>a;)if(n[r=s[a++]]===e)return r}},{"./$":30}],32:[function(t,e,r){var i=t("./$.redef");e.exports=function(t,e){for(var r in e)i(t,r,e[r]);return t}},{"./$.redef":33}],33:[function(t,e,r){e.exports=t("./$").hide},{"./$":30}],34:[function(t,e,r){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},{}],35:[function(t,e,r){function i(t,e){s.obj(t),s(null===e||n.isObject(e),e,": can't set as prototype!")}var n=t("./$"),s=t("./$.assert");e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r){try{(r=t("./$.ctx")(Function.call,n.getDesc(Object.prototype,"__proto__").set,2))({},[])}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}():void 0),check:i}},{"./$":30,"./$.assert":16,"./$.ctx":18}],36:[function(t,e,r){var i=t("./$"),n="__core-js_shared__",s=i.g[n]||i.hide(i.g,n,{})[n];e.exports=function(t){return s[t]||(s[t]={})}},{"./$":30}],37:[function(t,e,r){var i=t("./$"),n=t("./$.wks")("species");e.exports=function(t){!i.DESC||n in t||i.setDesc(t,n,{configurable:!0,get:i.that})}},{"./$":30,"./$.wks":42}],38:[function(t,e,r){var i=t("./$");e.exports=function(t){return function(e,r){var n,s,o=String(i.assertDefined(e)),a=i.toInteger(r),u=o.length;return 0>a||a>=u?t?"":void 0:(n=o.charCodeAt(a),55296>n||n>56319||a+1===u||(s=o.charCodeAt(a+1))<56320||s>57343?t?o.charAt(a):n:t?o.slice(a,a+2):(n-55296<<10)+(s-56320)+65536)}}},{"./$":30}],39:[function(t,e,r){"use strict";function i(){var t=+this;if(u.has(E,t)){var e=E[t];delete E[t],e()}}function n(t){i.call(t.data)}var s,o,a,u=t("./$"),h=t("./$.ctx"),c=t("./$.cof"),l=t("./$.invoke"),p=t("./$.dom-create"),f=u.g,d=u.isFunction,m=u.html,_=f.process,g=f.setImmediate,y=f.clearImmediate,v=f.postMessage,b=f.addEventListener,w=f.MessageChannel,x=0,E={},T="onreadystatechange";d(g)&&d(y)||(g=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return E[++x]=function(){l(d(t)?t:Function(t),e)},s(x),x},y=function(t){delete E[t]},"process"==c(_)?s=function(t){_.nextTick(h(i,t,1))}:b&&d(v)&&!f.importScripts?(s=function(t){v(t,"*")},b("message",n,!1)):d(w)?(o=new w,a=o.port2,o.port1.onmessage=n,s=h(a.postMessage,a,1)):s=T in p("script")?function(t){m.appendChild(p("script"))[T]=function(){m.removeChild(this),i.call(t)}}:function(t){setTimeout(h(i,t,1),0)}),e.exports={set:g,clear:y}},{"./$":30,"./$.cof":17,"./$.ctx":18,"./$.dom-create":20,"./$.invoke":25}],40:[function(t,e,r){function i(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+Math.random()).toString(36))}var n=0;i.safe=t("./$").g.Symbol||i,e.exports=i},{"./$":30}],41:[function(t,e,r){e.exports=function(){}},{}],42:[function(t,e,r){var i=t("./$").g,n=t("./$.shared")("wks");e.exports=function(e){return n[e]||(n[e]=i.Symbol&&i.Symbol[e]||t("./$.uid").safe("Symbol."+e))}},{"./$":30,"./$.shared":36,"./$.uid":40}],43:[function(t,e,r){var i=t("./$"),n=t("./$.unscope"),s=t("./$.uid").safe("iter"),o=t("./$.iter"),a=o.step,u=o.Iterators;t("./$.iter-define")(Array,"Array",function(t,e){i.set(this,s,{o:i.toObject(t),i:0,k:e})},function(){var t=this[s],e=t.o,r=t.k,i=t.i++;return!e||i>=e.length?(t.o=void 0,a(1)):"keys"==r?a(0,i):"values"==r?a(0,e[i]):a(0,[i,e[i]])},"values"),u.Arguments=u.Array,n("keys"),n("values"),n("entries")},{"./$":30,"./$.iter":29,"./$.iter-define":27,"./$.uid":40,"./$.unscope":41}],44:[function(t,e,r){var i=t("./$"),n=t("./$.def"),s=i.isObject,o=i.toObject;i.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(e,r){var a=(i.core.Object||{})[e]||Object[e],u=0,h={};h[e]=0==r?function(t){return s(t)?a(t):t}:1==r?function(t){return s(t)?a(t):t}:2==r?function(t){return s(t)?a(t):t}:3==r?function(t){return s(t)?a(t):!0}:4==r?function(t){return s(t)?a(t):!0}:5==r?function(t){return s(t)?a(t):!1}:6==r?function(t,e){return a(o(t),e)}:7==r?function(t){return a(Object(i.assertDefined(t)))}:8==r?function(t){return a(o(t))}:t("./$.get-names").get;try{a("z")}catch(t){u=1}n(n.S+n.F*u,"Object",h)})},{"./$":30,"./$.def":19,"./$.get-names":24}],45:[function(t,e,r){"use strict";var i=t("./$.cof"),n={};n[t("./$.wks")("toStringTag")]="z",t("./$").FW&&"z"!=i(n)&&t("./$.redef")(Object.prototype,"toString",function(){return"[object "+i.classof(this)+"]"},!0)},{"./$":30,"./$.cof":17,"./$.redef":33,"./$.wks":42}],46:[function(t,e,r){"use strict";function i(t){var e=new R(function(){});return t&&(e.constructor=Object),R.resolve(e)===e}function n(t){return A(t)&&(U?"Promise"==m.classof(t):E in t)}function s(t,e){return f.FW||t!==R||e!==p?b(t,e):!0}function o(t){var e=L(t)[x];return void 0!=e?e:t}function a(t){var e;return A(t)&&(e=t.then),M(e)?e:!1}function u(t){var e=t.c;e.length&&O(function(){function r(e){var r,s,o=n?e.ok:e.fail;try{o?(n||(t.h=!0),r=o===!0?i:o(i),r===e.P?e.rej(TypeError("Promise-chain cycle")):(s=a(r))?s.call(r,e.res,e.rej):e.res(r)):e.rej(i)}catch(t){e.rej(t)}}for(var i=t.v,n=1==t.s,s=0;e.length>s;)r(e[s++]);e.length=0})}function h(t){var e,r=t[E],i=r.a||r.c,n=0;if(r.h)return!1;for(;i.length>n;)if(e=i[n++],e.fail||!h(e.P))return!1;return!0}function c(t){var e,r=this;r.d||(r.d=!0,r=r.r||r,r.v=t,r.s=2,r.a=r.c.slice(),setTimeout(function(){O(function(){h(e=r.p)&&("process"==m(C)?C.emit("unhandledRejection",t,e):S.console&&M(console.error)&&console.error("Unhandled promise rejection",t)),r.a=void 0})},1),u(r))}function l(t){var e,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(e=a(t))?O(function(){var i={r:r,d:!1};try{e.call(t,d(l,i,1),d(c,i,1))}catch(t){c.call(i,t)}}):(r.v=t,r.s=1,u(r))}catch(t){c.call({r:r,d:!1},t)}}}var p,f=t("./$"),d=t("./$.ctx"),m=t("./$.cof"),_=t("./$.def"),g=t("./$.assert"),y=t("./$.for-of"),v=t("./$.set-proto").set,b=t("./$.same"),w=t("./$.species"),x=t("./$.wks")("species"),E=t("./$.uid").safe("record"),T="Promise",S=f.g,C=S.process,O=C&&C.nextTick||t("./$.task").set,R=S[T],M=f.isFunction,A=f.isObject,z=g.fn,L=g.obj,U=function(){function t(e){var r=new R(e);return v(r,t.prototype),r}var e=!1;try{if(e=M(R)&&M(R.resolve)&&i(),v(t,R),t.prototype=f.create(R.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&f.DESC){var r=!1;R.resolve(f.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(t){e=!1}return e}();U||(R=function(t){z(t);var e={p:g.inst(this,R,T),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1};f.hide(this,E,e);try{t(d(l,e,1),d(c,e,1))}catch(t){c.call(e,t)}},t("./$.mix")(R.prototype,{then:function(t,e){var r=L(L(this).constructor)[x],i={ok:M(t)?t:!0,fail:M(e)?e:!1},n=i.P=new(void 0!=r?r:R)(function(t,e){i.res=z(t),i.rej=z(e)}),s=this[E];return s.c.push(i),s.a&&s.a.push(i),s.s&&u(s),n},catch:function(t){return this.then(void 0,t)}})),_(_.G+_.W+_.F*!U,{Promise:R}),m.set(R,T),w(R),w(p=f.core[T]),_(_.S+_.F*!U,T,{reject:function(t){return new(o(this))(function(e,r){r(t)})}}),_(_.S+_.F*(!U||i(!0)),T,{resolve:function(t){return n(t)&&s(t.constructor,this)?t:new this(function(e){e(t)})}}),_(_.S+_.F*!(U&&t("./$.iter-detect")(function(t){R.all(t).catch(function(){})})),T,{all:function(t){var e=o(this),r=[];return new e(function(i,n){y(t,!1,r.push,r);var s=r.length,o=Array(s);s?f.each.call(r,function(t,r){e.resolve(t).then(function(t){o[r]=t,--s||i(o)},n)}):i(o)})},race:function(t){var e=o(this);return new e(function(r,i){y(t,!1,function(t){e.resolve(t).then(r,i)})})}})},{"./$":30,"./$.assert":16,"./$.cof":17,"./$.ctx":18,"./$.def":19,"./$.for-of":22,"./$.iter-detect":28,"./$.mix":32,"./$.same":34,"./$.set-proto":35,"./$.species":37,"./$.task":39,"./$.uid":40,"./$.wks":42}],47:[function(t,e,r){var i=t("./$").set,n=t("./$.string-at")(!0),s=t("./$.uid").safe("iter"),o=t("./$.iter"),a=o.step;t("./$.iter-define")(String,"String",function(t){i(this,s,{o:String(t),i:0})},function(){var t,e=this[s],r=e.o,i=e.i;return i>=r.length?a(1):(t=n(r,i),e.i+=t.length,a(0,t))})},{"./$":30,"./$.iter":29,"./$.iter-define":27,"./$.string-at":38,"./$.uid":40}],48:[function(t,e,r){"use strict";function i(t){var e=P[t]=l.set(E(A.prototype),L,t);return w&&z&&j(b,t,{configurable:!0,set:function(e){x(this,U)&&x(this[U],t)&&(this[U][t]=!1),j(this,t,C(1,e))}}),e}function n(t,e,r){return r&&x(P,e)?(r.enumerable?(x(t,U)&&t[U][e]&&(t[U][e]=!1),r=E(r,{enumerable:C(0,!1)})):(x(t,U)||S(t,U,C(1,{})),t[U][e]=!0),j(t,e,r)):S(t,e,r)}function s(t,e){v(t);for(var r,i=y(e=M(e)),s=0,o=i.length;o>s;)n(t,r=i[s++],e[r]);return t}function o(t,e){return void 0===e?E(t):s(E(t),e)}function a(t){var e=I.call(this,t);return e||!x(this,t)||!x(P,t)||x(this,U)&&this[U][t]?e:!0}function u(t,e){var r=T(t=M(t),e);return!r||!x(P,e)||x(t,U)&&t[U][e]||(r.enumerable=!0),r}function h(t){for(var e,r=R(M(t)),i=[],n=0;r.length>n;)x(P,e=r[n++])||e==U||i.push(e);return i}function c(t){for(var e,r=R(M(t)),i=[],n=0;r.length>n;)x(P,e=r[n++])&&i.push(P[e]);return i}var l=t("./$"),p=t("./$.cof").set,f=t("./$.uid"),d=t("./$.shared"),m=t("./$.def"),_=t("./$.redef"),g=t("./$.keyof"),y=t("./$.enum-keys"),v=t("./$.assert").obj,b=Object.prototype,w=l.DESC,x=l.has,E=l.create,T=l.getDesc,S=l.setDesc,C=l.desc,O=t("./$.get-names"),R=O.get,M=l.toObject,A=l.g.Symbol,z=!1,L=f("tag"),U=f("hidden"),I={}.propertyIsEnumerable,D=d("symbol-registry"),P=d("symbols"),k=l.isFunction(A),j=w?function(){try{return E(S({},U,{get:function(){return S(this,U,{value:!1})[U]}}))[U]||S}catch(t){return function(t,e,r){var i=T(b,e);i&&delete b[e],S(t,e,r),i&&t!==b&&S(b,e,i)}}}():S;k||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor");return i(f(arguments[0]))},_(A.prototype,"toString",function(){return this[L]}),l.create=o,l.setDesc=n,l.getDesc=u,l.setDescs=s,l.getNames=O.get=h,l.getSymbols=c,l.DESC&&l.FW&&_(b,"propertyIsEnumerable",a,!0));var F={for:function(t){return x(D,t+="")?D[t]:D[t]=A(t)},keyFor:function(t){return g(D,t)},useSetter:function(){z=!0},useSimple:function(){z=!1}};l.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var r=t("./$.wks")(e);F[e]=k?r:i(r)}),z=!0,m(m.G+m.W,{Symbol:A}),m(m.S,"Symbol",F),m(m.S+m.F*!k,"Object",{create:o,defineProperty:n,defineProperties:s,getOwnPropertyDescriptor:u,getOwnPropertyNames:h,getOwnPropertySymbols:c}),p(A,"Symbol"),p(Math,"Math",!0),p(l.g.JSON,"JSON",!0)},{"./$":30,"./$.assert":16,"./$.cof":17,"./$.def":19,"./$.enum-keys":21,"./$.get-names":24,"./$.keyof":31,"./$.redef":33,"./$.shared":36,"./$.uid":40,"./$.wks":42}],49:[function(t,e,r){t("./es6.array.iterator");var i=t("./$"),n=t("./$.iter").Iterators,s=t("./$.wks")("iterator"),o=n.Array,a=i.g.NodeList,u=i.g.HTMLCollection,h=a&&a.prototype,c=u&&u.prototype;i.FW&&(!a||s in h||i.hide(h,s,o),!u||s in c||i.hide(c,s,o)),n.NodeList=n.HTMLCollection=o},{"./$":30,"./$.iter":29,"./$.wks":42,"./es6.array.iterator":43}],50:[function(t,e,r){"use strict";function i(t){this._node=t,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this._requestingUpdate=!1,this._id=t.addComponent(this),this._viewTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._viewDirty=!1,this._perspectiveDirty=!1,this.setFlat()}i.FRUSTUM_PROJECTION=0,i.PINHOLE_PROJECTION=1,i.ORTHOGRAPHIC_PROJECTION=2,i.prototype.toString=function(){return"Camera"},i.prototype.getValue=function(){return{component:this.toString(),projectionType:this._projectionType,focalDepth:this._focalDepth,near:this._near,far:this._far}},i.prototype.setValue=function(t){return this.toString()===t.component?(this.set(t.projectionType,t.focalDepth,t.near,t.far),!0):!1},i.prototype.set=function(t,e,r,i){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._projectionType=t,this._focalDepth=e,this._near=r,this._far=i},i.prototype.setDepth=function(t){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.PINHOLE_PROJECTION,this._focalDepth=t,this._near=0,this._far=0,this},i.prototype.setFrustum=function(t,e){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.FRUSTUM_PROJECTION,this._focalDepth=0,this._near=t,this._far=e,this},i.prototype.setFlat=function(){return this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0),this._perspectiveDirty=!0,this._projectionType=i.ORTHOGRAPHIC_PROJECTION,this._focalDepth=0,this._near=0,this._far=0,this},i.prototype.onUpdate=function(){this._requestingUpdate=!1;var t=this._node.getLocation();if(this._node.sendDrawCommand("WITH").sendDrawCommand(t),this._perspectiveDirty)switch(this._perspectiveDirty=!1,this._projectionType){case i.FRUSTUM_PROJECTION:this._node.sendDrawCommand("FRUSTUM_PROJECTION"),this._node.sendDrawCommand(this._near),this._node.sendDrawCommand(this._far);break;case i.PINHOLE_PROJECTION:this._node.sendDrawCommand("PINHOLE_PROJECTION"),this._node.sendDrawCommand(this._focalDepth);break;case i.ORTHOGRAPHIC_PROJECTION:this._node.sendDrawCommand("ORTHOGRAPHIC_PROJECTION")}this._viewDirty&&(this._viewDirty=!1,this._node.sendDrawCommand("CHANGE_VIEW_TRANSFORM"),this._node.sendDrawCommand(this._viewTransform[0]),this._node.sendDrawCommand(this._viewTransform[1]),this._node.sendDrawCommand(this._viewTransform[2]),this._node.sendDrawCommand(this._viewTransform[3]),this._node.sendDrawCommand(this._viewTransform[4]),this._node.sendDrawCommand(this._viewTransform[5]),this._node.sendDrawCommand(this._viewTransform[6]),this._node.sendDrawCommand(this._viewTransform[7]),this._node.sendDrawCommand(this._viewTransform[8]),this._node.sendDrawCommand(this._viewTransform[9]),this._node.sendDrawCommand(this._viewTransform[10]),this._node.sendDrawCommand(this._viewTransform[11]),this._node.sendDrawCommand(this._viewTransform[12]),this._node.sendDrawCommand(this._viewTransform[13]),this._node.sendDrawCommand(this._viewTransform[14]),this._node.sendDrawCommand(this._viewTransform[15]))},i.prototype.onTransformChange=function(t){var e=t;this._viewDirty=!0,this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0);var r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],_=e[14],g=e[15],y=r*a-i*o,v=r*u-n*o,b=r*h-s*o,w=i*u-n*a,x=i*h-s*a,E=n*h-s*u,T=c*m-l*d,S=c*_-p*d,C=c*g-f*d,O=l*_-p*m,R=l*g-f*m,M=p*g-f*_,A=1/(y*M-v*R+b*O+w*C-x*S+E*T);this._viewTransform[0]=(a*M-u*R+h*O)*A,this._viewTransform[1]=(n*R-i*M-s*O)*A,this._viewTransform[2]=(m*E-_*x+g*w)*A,this._viewTransform[3]=(p*x-l*E-f*w)*A,this._viewTransform[4]=(u*C-o*M-h*S)*A,this._viewTransform[5]=(r*M-n*C+s*S)*A,this._viewTransform[6]=(_*b-d*E-g*v)*A,this._viewTransform[7]=(c*E-p*b+f*v)*A,this._viewTransform[8]=(o*R-a*C+h*T)*A,this._viewTransform[9]=(i*C-r*R-s*T)*A,this._viewTransform[10]=(d*x-m*b+g*y)*A,this._viewTransform[11]=(l*b-c*x-f*y)*A,this._viewTransform[12]=(a*S-o*O-u*T)*A,this._viewTransform[13]=(r*O-i*S+n*T)*A,this._viewTransform[14]=(m*v-d*w-_*y)*A,this._viewTransform[15]=(c*w-l*v+p*y)*A},e.exports=i},{}],51:[function(t,e,r){"use strict";function i(){"undefined"!=typeof self&&self.window!==self&&this._enterWorkerMode()}i.prototype._enterWorkerMode=function(){this._workerMode=!0;var t=this;self.addEventListener("message",function(e){t.onMessage(e.data)})},i.prototype.onMessage=null,i.prototype.sendMessage=function(t){this._workerMode?self.postMessage(t):this.onmessage(t)},i.prototype.onmessage=null,i.prototype.postMessage=function(t){return this.onMessage(t)},e.exports=i},{}],52:[function(t,e,r){"use strict";function i(){this._time=0,this._frame=0,this._timerQueue=[],this._updatingIndex=0,this._scale=1,this._scaledTime=this._time}i.prototype.setScale=function(t){return this._scale=t,this},i.prototype.getScale=function(){return this._scale},i.prototype.step=function(t){this._frame++,this._scaledTime=this._scaledTime+(t-this._time)*this._scale,this._time=t;for(var e=0;e<this._timerQueue.length;e++)this._timerQueue[e](this._scaledTime)&&this._timerQueue.splice(e,1);return this},i.prototype.now=function(){return this._scaledTime},i.prototype.getTime=i.prototype.now,i.prototype.getFrame=function(){return this._frame},i.prototype.setTimeout=function(t,e){var r=Array.prototype.slice.call(arguments,2),i=this._time,n=function(n){return n-i>=e?(t.apply(null,r),!0):!1};return this._timerQueue.push(n),n},i.prototype.setInterval=function(t,e){var r=Array.prototype.slice.call(arguments,2),i=this._time,n=function(n){return n-i>=e&&(t.apply(null,r),i=n),!1};return this._timerQueue.push(n),n},i.prototype.clearTimer=function(t){var e=this._timerQueue.indexOf(t);return-1!==e&&this._timerQueue.splice(e,1),this},e.exports=i},{}],53:[function(t,e,r){"use strict";function i(t){if(!t)throw new Error("Dispatch needs to be instantiated on a node");this._context=t,this._queue=[]}function n(t,e){e.length=0;var r,i=0,n=t.length;for(r=0;n>r;r++)"/"===t[r]&&(e.push(t.substring(i,r)),i=r+1);return r-i>0&&e.push(t.substring(i,r)),e}var s=t("./Event");i.prototype.lookupNode=function(t){if(!t)throw new Error("lookupNode must be called with a path");var e=this._queue;if(n(t,e),e[0]!==this._context.getSelector())return void 0;var r,i=this._context.getChildren(),s=1;for(e[0]=this._context;s<e.length;){if(r=i[e[s]],e[s]=r,!r)return void 0;i=r.getChildren(),s++}return r},i.prototype.dispatch=function(t,e){if(!t)throw new Error("dispatch requires an event name as it's first argument");var r,i,n,s,o=this._queue;for(o.length=0,o.push(this._context);o.length;)for(r=o.shift(),r.onReceive&&r.onReceive(t,e),s=r.getChildren(),i=0,n=s.length;n>i;i++)o.push(s[i])},i.prototype.dispatchUIEvent=function(t,e,r){if(!t)throw new Error("dispatchUIEvent needs a valid path to dispatch to");if(!e)throw new Error("dispatchUIEvent needs an event name as its second argument");var i,n=this._queue;for(s.call(r),r.node=this.lookupNode(t);n.length&&(i=n.pop(),i.onReceive&&i.onReceive(e,r),!r.propagationStopped););},e.exports=i},{"./Event":54}],54:[function(t,e,r){"use strict";function i(){this.propagationStopped=!1,this.stopPropagation=n}function n(){this.propagationStopped=!0}e.exports=i},{}],55:[function(t,e,r){"use strict";function i(){var t=this;this._updateQueue=[],this._nextUpdateQueue=[],this._scenes={},this._messages=p,this._inUpdate=!1,this._clock=new n,this._channel=new o,this._channel.onMessage=function(e){t.handleMessage(e)}}var n=t("./Clock"),s=t("./Scene"),o=t("./Channel"),a=t("../renderers/UIManager"),u=t("../renderers/Compositor"),h=t("../render-loops/RequestAnimationFrameLoop"),c=["ENGINE","START"],l=["ENGINE","STOP"],p=["TIME",null];i.prototype.init=function(t){return this.compositor=t&&t.compositor||new u,this.renderLoop=t&&t.renderLoop||new h,this.uiManager=new a(this.getChannel(),this.compositor,this.renderLoop),this},i.prototype.setChannel=function(t){return this._channel=t,this},i.prototype.getChannel=function(){return this._channel},i.prototype._update=function(){this._inUpdate=!0;var t,e=this._clock.now(),r=this._nextUpdateQueue,i=this._updateQueue;for(this._messages[1]=e;r.length;)i.unshift(r.pop());for(;i.length;)t=i.shift(),t&&t.onUpdate&&t.onUpdate(e);this._inUpdate=!1},i.prototype.requestUpdate=function(t){if(!t)throw new Error("requestUpdate must be called with a class to be updated");this._inUpdate?this.requestUpdateOnNextTick(t):this._updateQueue.push(t)},i.prototype.requestUpdateOnNextTick=function(t){this._nextUpdateQueue.push(t)},i.prototype.handleMessage=function(t){if(!t)throw new Error("onMessage must be called with an array of messages");for(var e;t.length>0;)switch(e=t.shift()){case"WITH":this.handleWith(t);break;case"FRAME":this.handleFrame(t);break;default:throw new Error("received unknown command: "+e)}return this},i.prototype.handleWith=function(t){var e=t.shift(),r=t.shift();switch(r){case"TRIGGER":var i=t.shift(),n=t.shift();this.getContext(e).getDispatch().dispatchUIEvent(e,i,n);break;default:throw new Error("received unknown command: "+r)}return this},i.prototype.handleFrame=function(t){if(!t)throw new Error("handleFrame must be called with an array of messages");if(!t.length)throw new Error("FRAME must be sent with a time");return this.step(t.shift()),this},i.prototype.step=function(t){if(null==t)throw new Error("step must be called with a time");return this._clock.step(t),this._update(),this._messages.length&&(this._channel.sendMessage(this._messages),this._messages.length=2),this},i.prototype.getContext=function(t){if(!t)throw new Error("getContext must be called with a selector");var e=t.indexOf("/");return t=-1===e?t:t.substring(0,e),this._scenes[t]},i.prototype.getClock=function(){return this._clock},i.prototype.message=function(t){return this._messages.push(t),this},i.prototype.createScene=function(t){return t=t||"body",this._scenes[t]&&this._scenes[t].dismount(),this._scenes[t]=new s(t,this),this._scenes[t]},i.prototype.startEngine=function(){return this._channel.sendMessage(c),this},i.prototype.stopEngine=function(){return this._channel.sendMessage(l),this},e.exports=new i},{"../render-loops/RequestAnimationFrameLoop":80,"../renderers/Compositor":81,"../renderers/UIManager":83,"./Channel":51,"./Clock":52,"./Scene":57}],56:[function(t,e,r){"use strict";function i(){this._calculatedValues={transform:new Float32Array(u),size:new Float32Array(3)},this._requestingUpdate=!1,this._inUpdate=!1,this._updateQueue=[],this._nextUpdateQueue=[],this._freedComponentIndicies=[],this._components=[],this._freedChildIndicies=[],this._children=[],this._parent=null,this._globalUpdater=null,this._lastEulerX=0,this._lastEulerY=0,this._lastEulerZ=0,this._lastEuler=!1,this.value=new i.Spec;
}var n=t("./Transform"),s=t("./Size"),o=new n,a=new s,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[1,1,1],c=[0,0,0,1];i.RELATIVE_SIZE=s.RELATIVE,i.ABSOLUTE_SIZE=s.ABSOLUTE,i.RENDER_SIZE=s.RENDER,i.DEFAULT_SIZE=s.DEFAULT,i.Spec=function(){this.location=null,this.showState={mounted:!1,shown:!1,opacity:1},this.offsets={mountPoint:new Float32Array(3),align:new Float32Array(3),origin:new Float32Array(3)},this.vectors={position:new Float32Array(3),rotation:new Float32Array(c),scale:new Float32Array(h)},this.size={sizeMode:new Float32Array([s.RELATIVE,s.RELATIVE,s.RELATIVE]),proportional:new Float32Array(h),differential:new Float32Array(3),absolute:new Float32Array(3),render:new Float32Array(3)},this.UIEvents=[]},i.prototype.getLocation=function(){return this.value.location},i.prototype.getId=i.prototype.getLocation,i.prototype.emit=function(t,e){for(var r=this;r!==r.getParent();)r=r.getParent();return r.getDispatch().dispatch(t,e),this},i.prototype.sendDrawCommand=function(t){return this._globalUpdater.message(t),this},i.prototype.getValue=function(){for(var t=this._children.length,e=this._components.length,r=0,i={location:this.value.location,spec:this.value,components:new Array(e),children:new Array(t)};t>r;r++)this._children[r]&&this._children[r].getValue&&(i.children[r]=this._children[r].getValue());for(r=0;e>r;r++)this._components[r]&&this._components[r].getValue&&(i.components[r]=this._components[r].getValue());return i},i.prototype.getComputedValue=function(){for(var t=this._children.length,e={location:this.value.location,computedValues:this._calculatedValues,children:new Array(t)},r=0;t>r;r++)e.children[r]=this._children[r].getComputedValue();return e},i.prototype.getChildren=function(){return this._children},i.prototype.getParent=function(){return this._parent},i.prototype.requestUpdate=function(t){return this._inUpdate||!this.isMounted()?this.requestUpdateOnNextTick(t):(this._updateQueue.push(t),this._requestingUpdate||this._requestUpdate(),this)},i.prototype.requestUpdateOnNextTick=function(t){return this._nextUpdateQueue.push(t),this},i.prototype.getUpdater=function(){return this._globalUpdater},i.prototype.isMounted=function(){return this.value.showState.mounted},i.prototype.isShown=function(){return this.value.showState.shown},i.prototype.getOpacity=function(){return this.value.showState.opacity},i.prototype.getMountPoint=function(){return this.value.offsets.mountPoint},i.prototype.getAlign=function(){return this.value.offsets.align},i.prototype.getOrigin=function(){return this.value.offsets.origin},i.prototype.getPosition=function(){return this.value.vectors.position},i.prototype.getRotation=function(){return this.value.vectors.rotation},i.prototype.getScale=function(){return this.value.vectors.scale},i.prototype.getSizeMode=function(){return this.value.size.sizeMode},i.prototype.getProportionalSize=function(){return this.value.size.proportional},i.prototype.getDifferentialSize=function(){return this.value.size.differential},i.prototype.getAbsoluteSize=function(){return this.value.size.absolute},i.prototype.getRenderSize=function(){return this.value.size.render},i.prototype.getSize=function(){return this._calculatedValues.size},i.prototype.getTransform=function(){return this._calculatedValues.transform},i.prototype.getUIEvents=function(){return this.value.UIEvents},i.prototype.addChild=function(t){var e=t?this._children.indexOf(t):-1;if(t=t?t:new i,-1===e&&(e=this._freedChildIndicies.length?this._freedChildIndicies.pop():this._children.length,this._children[e]=t,this.isMounted()&&t.onMount)){var r=this.getId(),n=r+"/"+e;t.onMount(this,n)}return t},i.prototype.removeChild=function(t){var e=this._children.indexOf(t),r=-1!==e;return r&&(this._freedChildIndicies.push(e),this._children[e]=null,this.isMounted()&&t.onDismount&&t.onDismount()),r},i.prototype.addComponent=function(t){var e=this._components.indexOf(t);return-1===e&&(e=this._freedComponentIndicies.length?this._freedComponentIndicies.pop():this._components.length,this._components[e]=t,this.isMounted()&&t.onMount&&t.onMount(this,e),this.isShown()&&t.onShow&&t.onShow()),e},i.prototype.getComponent=function(t){return this._components[t]},i.prototype.removeComponent=function(t){var e=this._components.indexOf(t);return-1!==e&&(this._freedComponentIndicies.push(e),this.isShown()&&t.onHide&&t.onHide(),this.isMounted()&&t.onDismount&&t.onDismount(),this._components[e]=null),t},i.prototype.addUIEvent=function(t){var e,r=this.getUIEvents(),i=this._components,n=-1!==r.indexOf(t);if(!n){r.push(t);for(var s=0,o=i.length;o>s;s++)e=i[s],e&&e.onAddUIEvent&&e.onAddUIEvent(t)}},i.prototype._requestUpdate=function(t){(t||!this._requestingUpdate&&this._globalUpdater)&&(this._globalUpdater.requestUpdate(this),this._requestingUpdate=!0)},i.prototype._vecOptionalSet=function(t,e,r){return null!=r&&t[e]!==r?(t[e]=r,this._requestingUpdate||this._requestUpdate(),!0):!1},i.prototype.show=function(){var t,e=0,r=this._components,i=r.length;for(this.value.showState.shown=!0;i>e;e++)t=r[e],t&&t.onShow&&t.onShow();for(e=0,r=this._children,i=r.length;i>e;e++)t=r[e],t&&t.onParentShow&&t.onParentShow();return this},i.prototype.hide=function(){var t,e=0,r=this._components,i=r.length;for(this.value.showState.shown=!1;i>e;e++)t=r[e],t&&t.onHide&&t.onHide();for(e=0,r=this._children,i=r.length;i>e;e++)t=r[e],t&&t.onParentHide&&t.onParentHide();return this},i.prototype.setAlign=function(t,e,r){var i=this.value.offsets.align,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,null!=r&&(n=this._vecOptionalSet(i,2,r-.5)||n),n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onAlignChange&&s.onAlignChange(t,e,r)}return this},i.prototype.setMountPoint=function(t,e,r){var i=this.value.offsets.mountPoint,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,null!=r&&(n=this._vecOptionalSet(i,2,r-.5)||n),n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onMountPointChange&&s.onMountPointChange(t,e,r)}return this},i.prototype.setOrigin=function(t,e,r){var i=this.value.offsets.origin,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,null!=r&&(n=this._vecOptionalSet(i,2,r-.5)||n),n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onOriginChange&&s.onOriginChange(t,e,r)}return this},i.prototype.setPosition=function(t,e,r){var i=this.value.vectors.position,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,n=this._vecOptionalSet(i,2,r)||n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onPositionChange&&s.onPositionChange(t,e,r)}return this},i.prototype.setRotation=function(t,e,r,i){var n,s,o,a,u=this.value.vectors.rotation,h=!1;if(null!=i)n=t,s=e,o=r,a=i,this._lastEulerX=null,this._lastEulerY=null,this._lastEulerZ=null,this._lastEuler=!1;else{if(null==t||null==e||null==r)if(this._lastEuler)t=null==t?this._lastEulerX:t,e=null==e?this._lastEulerY:e,r=null==r?this._lastEulerZ:r;else{var c=-2*(u[1]*u[2]-u[3]*u[0]);Math.abs(c)>.99999?(e=null==e?.5*Math.PI*c:e,t=null==t?Math.atan2(-u[0]*u[2]+u[3]*u[1],.5-u[1]*u[1]-u[2]*u[2]):t,r=null==r?0:r):(e=null==e?Math.asin(c):e,t=null==t?Math.atan2(u[0]*u[2]+u[3]*u[1],.5-u[0]*u[0]-u[1]*u[1]):t,r=null==r?Math.atan2(u[0]*u[1]+u[3]*u[2],.5-u[0]*u[0]-u[2]*u[2]):r)}var l=.5*t,p=.5*e,f=.5*r,d=Math.sin(l),m=Math.sin(p),_=Math.sin(f),g=Math.cos(l),y=Math.cos(p),v=Math.cos(f),b=m*_,w=y*_,x=m*v,E=y*v;n=d*E+g*b,s=g*x-d*w,o=g*w+d*x,a=g*E-d*b,this._lastEuler=!0,this._lastEulerX=t,this._lastEulerY=e,this._lastEulerZ=r}if(h=this._vecOptionalSet(u,0,n)||h,h=this._vecOptionalSet(u,1,s)||h,h=this._vecOptionalSet(u,2,o)||h,h=this._vecOptionalSet(u,3,a)||h){var T,S=0,C=this._components,O=C.length;for(t=u[0],e=u[1],r=u[2],i=u[3];O>S;S++)T=C[S],T&&T.onRotationChange&&T.onRotationChange(t,e,r,i)}return this},i.prototype.setScale=function(t,e,r){var i=this.value.vectors.scale,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,n=this._vecOptionalSet(i,2,r)||n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onScaleChange&&s.onScaleChange(t,e,r)}return this},i.prototype.setOpacity=function(t){if(t!==this.value.showState.opacity){this.value.showState.opacity=t,this._requestingUpdate||this._requestUpdate();for(var e,r=0,i=this._components,n=i.length;n>r;r++)e=i[r],e&&e.onOpacityChange&&e.onOpacityChange(t)}return this},i.prototype.setSizeMode=function(t,e,r){var i=this.value.size.sizeMode,n=!1;if(null!=t&&(n=this._resolveSizeMode(i,0,t)||n),null!=e&&(n=this._resolveSizeMode(i,1,e)||n),null!=r&&(n=this._resolveSizeMode(i,2,r)||n),n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onSizeModeChange&&s.onSizeModeChange(t,e,r)}return this},i.prototype._resolveSizeMode=function(t,e,r){if(r.constructor!==String)return this._vecOptionalSet(t,e,r);switch(r.toLowerCase()){case"relative":case"default":return this._vecOptionalSet(t,e,0);case"absolute":return this._vecOptionalSet(t,e,1);case"render":return this._vecOptionalSet(t,e,2);default:throw new Error("unknown size mode: "+r)}},i.prototype.setProportionalSize=function(t,e,r){var i=this.value.size.proportional,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,n=this._vecOptionalSet(i,2,r)||n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onProportionalSizeChange&&s.onProportionalSizeChange(t,e,r)}return this},i.prototype.setDifferentialSize=function(t,e,r){var i=this.value.size.differential,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,n=this._vecOptionalSet(i,2,r)||n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onDifferentialSizeChange&&s.onDifferentialSizeChange(t,e,r)}return this},i.prototype.setAbsoluteSize=function(t,e,r){var i=this.value.size.absolute,n=!1;if(n=this._vecOptionalSet(i,0,t)||n,n=this._vecOptionalSet(i,1,e)||n,n=this._vecOptionalSet(i,2,r)||n){var s,o=0,a=this._components,u=a.length;for(t=i[0],e=i[1],r=i[2];u>o;o++)s=a[o],s&&s.onAbsoluteSizeChange&&s.onAbsoluteSizeChange(t,e,r)}return this},i.prototype._transformChanged=function(t){for(var e,r=0,i=this._components,n=i.length;n>r;r++)e=i[r],e&&e.onTransformChange&&e.onTransformChange(t);for(r=0,i=this._children,n=i.length;n>r;r++)e=i[r],e&&e.onParentTransformChange&&e.onParentTransformChange(t)},i.prototype._sizeChanged=function(t){for(var e,r=0,i=this._components,n=i.length;n>r;r++)e=i[r],e&&e.onSizeChange&&e.onSizeChange(t);for(r=0,i=this._children,n=i.length;n>r;r++)e=i[r],e&&e.onParentSizeChange&&e.onParentSizeChange(t)},i.prototype.getFrame=function(){return this._globalUpdater.getFrame()},i.prototype.getComponents=function(){return this._components},i.prototype.update=function(t){this._inUpdate=!0;for(var e,r=this._nextUpdateQueue,i=this._updateQueue;r.length;)i.unshift(r.pop());for(;i.length;)e=this._components[i.shift()],e&&e.onUpdate&&e.onUpdate(t);var n=this.getSize(),s=this.getTransform(),u=this.getParent(),h=u.getSize(),c=u.getTransform(),l=a.fromSpecWithParent(h,this,n),p=o.fromSpecWithParent(c,this.value,n,h,s);return p&&this._transformChanged(s),l&&this._sizeChanged(n),this._inUpdate=!1,this._requestingUpdate=!1,this.isMounted()?this._nextUpdateQueue.length&&(this._globalUpdater.requestUpdateOnNextTick(this),this._requestingUpdate=!0):(this._parent=null,this.value.location=null,this._globalUpdater=null),this},i.prototype.mount=function(t,e){if(this.isMounted())return this;var r,i=0,n=this._components,s=n.length;for(this._parent=t,this._globalUpdater=t.getUpdater(),this.value.location=e,this.value.showState.mounted=!0;s>i;i++)r=n[i],r&&r.onMount&&r.onMount(this,i);for(i=0,n=this._children,s=n.length;s>i;i++)r=n[i],r&&r.onParentMount&&r.onParentMount(this,e,i);return this._requestingUpdate||this._requestUpdate(!0),this},i.prototype.dismount=function(){if(!this.isMounted())return this;var t,e=0,r=this._components,i=r.length;for(this.value.showState.mounted=!1,this._parent.removeChild(this);i>e;e++)t=r[e],t&&t.onDismount&&t.onDismount();for(e=0,r=this._children,i=r.length;i>e;e++)t=r[e],t&&t.onParentDismount&&t.onParentDismount();return this._requestingUpdate||this._requestUpdate(),this},i.prototype.onParentMount=function(t,e,r){return this.mount(t,e+"/"+r)},i.prototype.onParentDismount=function(){return this.dismount()},i.prototype.receive=function(t,e){for(var r,i=0,n=this._components,s=n.length;s>i;i++)r=n[i],r&&r.onReceive&&r.onReceive(t,e);return this},i.prototype._requestUpdateWithoutArgs=function(){this._requestingUpdate||this._requestUpdate()},i.prototype.onUpdate=i.prototype.update,i.prototype.onParentShow=i.prototype.show,i.prototype.onParentHide=i.prototype.hide,i.prototype.onParentTransformChange=i.prototype._requestUpdateWithoutArgs,i.prototype.onParentSizeChange=i.prototype._requestUpdateWithoutArgs,i.prototype.onShow=i.prototype.show,i.prototype.onHide=i.prototype.hide,i.prototype.onMount=i.prototype.mount,i.prototype.onDismount=i.prototype.dismount,i.prototype.onReceive=i.prototype.receive,e.exports=i},{"./Size":58,"./Transform":59}],57:[function(t,e,r){"use strict";function i(t,e){if(!t)throw new Error("Scene needs to be created with a DOM selector");if(!e)throw new Error("Scene needs to be created with a class like Famous");s.call(this),this._updater=e,this._dispatch=new n(this),this._selector=t,this.onMount(this,t),this._updater.message("NEED_SIZE_FOR").message(t),this.show()}var n=t("./Dispatch"),s=t("./Node"),o=t("./Size");i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.getUpdater=function(){return this._updater},i.prototype.getSelector=function(){return this._selector},i.prototype.getDispatch=function(){return this._dispatch},i.prototype.onReceive=function(t,e){if("CONTEXT_RESIZE"===t){if(e.length<2)throw new Error("CONTEXT_RESIZE's payload needs to be at least a pair of pixel sizes");this.setSizeMode(o.ABSOLUTE,o.ABSOLUTE,o.ABSOLUTE),this.setAbsoluteSize(e[0],e[1],e[2]?e[2]:0)}},e.exports=i},{"./Dispatch":53,"./Node":56,"./Size":58}],58:[function(t,e,r){"use strict";function i(){this._size=new Float32Array(3)}i.RELATIVE=0,i.ABSOLUTE=1,i.RENDER=2,i.DEFAULT=i.RELATIVE,i.prototype.fromSpecWithParent=function(t,e,r){for(var n,s,o=e.getValue().spec,a=e.getComponents(),u=o.size.sizeMode,h=!1,c=a.length,l=0;3>l;l++){switch(u[l]){case i.RELATIVE:n=r[l],r[l]=t[l]*o.size.proportional[l]+o.size.differential[l];break;case i.ABSOLUTE:n=r[l],r[l]=o.size.absolute[l];break;case i.RENDER:var p,f;for(s=0;c>s;s++)f=a[s],f&&f.getRenderSize&&(p=f.getRenderSize()[l],n=r[l],r[l]=r[l]<p||0===r[l]?p:r[l])}h=h||n!==r[l]}return h},e.exports=i},{}],59:[function(t,e,r){"use strict";function i(){this._matrix=new Float32Array(16)}i.prototype.get=function(){return this._matrix},i.prototype.fromSpecWithParent=function(t,e,r,i,n){n=n?n:this._matrix;var s=n[0],o=n[1],a=n[2],u=n[4],h=n[5],c=n[6],l=n[8],p=n[9],f=n[10],d=n[12],m=n[13],_=n[14],g=t[0],y=t[1],v=t[2],b=t[4],w=t[5],x=t[6],E=t[8],T=t[9],S=t[10],C=t[12],O=t[13],R=t[14],M=e.vectors.position[0],A=e.vectors.position[1],z=e.vectors.position[2],L=e.vectors.rotation[0],U=e.vectors.rotation[1],I=e.vectors.rotation[2],D=e.vectors.rotation[3],P=e.vectors.scale[0],k=e.vectors.scale[1],j=e.vectors.scale[2],F=e.offsets.align[0]*i[0],$=e.offsets.align[1]*i[1],N=e.offsets.align[2]*i[2],q=e.offsets.mountPoint[0]*r[0],G=e.offsets.mountPoint[1]*r[1],V=e.offsets.mountPoint[2]*r[2],W=e.offsets.origin[0]*r[0],B=e.offsets.origin[1]*r[1],H=e.offsets.origin[2]*r[2],K=D*L,Q=D*U,Y=D*I,X=L*L,Z=U*U,J=I*I,tt=L*U,et=L*I,rt=U*I,it=(1-2*(Z+J))*P,nt=2*(tt+Y)*P,st=2*(et-Q)*P,ot=2*(tt-Y)*k,at=(1-2*(X+J))*k,ut=2*(rt+K)*k,ht=2*(et+Q)*j,ct=2*(rt-K)*j,lt=(1-2*(X+Z))*j,pt=F+M-q+W-(it*W+ot*B+ht*H),ft=$+A-G+B-(nt*W+at*B+ct*H),dt=N+z-V+H-(st*W+ut*B+lt*H);return n[0]=g*it+b*nt+E*st,n[1]=y*it+w*nt+T*st,n[2]=v*it+x*nt+S*st,n[3]=0,n[4]=g*ot+b*at+E*ut,n[5]=y*ot+w*at+T*ut,n[6]=v*ot+x*at+S*ut,n[7]=0,n[8]=g*ht+b*ct+E*lt,n[9]=y*ht+w*ct+T*lt,n[10]=v*ht+x*ct+S*lt,n[11]=0,n[12]=g*pt+b*ft+E*dt+C,n[13]=y*pt+w*ft+T*dt+O,n[14]=v*pt+x*ft+S*dt+R,n[15]=1,s!==n[0]||o!==n[1]||a!==n[2]||u!==n[4]||h!==n[5]||c!==n[6]||l!==n[8]||p!==n[9]||f!==n[10]||d!==n[12]||m!==n[13]||_!==n[14]},e.exports=i},{}],60:[function(t,e,r){"use strict";function i(t,e){if(!t)throw new Error("DOMElement must be instantiated on a node");if(this._node=t,this._requestingUpdate=!1,this._renderSized=!1,this._requestRenderSize=!1,this._changeQueue=[],this._UIEvents=t.getUIEvents().slice(0),this._classes=["famous-dom-element"],this._requestingEventListeners=[],this._styles={},this.setProperty("display",t.isShown()?"none":"block"),this.onOpacityChange(t.getOpacity()),this._attributes={},this._content="",this._tagName=e&&e.tagName?e.tagName:"div",this._id=t.addComponent(this),this._renderSize=[0,0,0],this._callbacks=new n,e){var r,i;if(e.classes)for(r=0;r<e.classes.length;r++)this.addClass(e.classes[r]);if(e.attributes)for(i in e.attributes)this.setAttribute(i,e.attributes[i]);if(e.properties)for(i in e.properties)this.setProperty(i,e.properties[i]);e.id&&this.setId(e.id),e.content&&this.setContent(e.content),e.cutout===!1&&this.setCutoutState(e.cutout)}}var n=t("../utilities/CallbackStore"),s=2;i.prototype.getValue=function(){return{classes:this._classes,styles:this._styles,attributes:this._attributes,content:this._content,id:this._attributes.id,tagName:this._tagName}},i.prototype.onUpdate=function(){var t=this._node,e=this._changeQueue,r=e.length;if(r&&t){for(t.sendDrawCommand("WITH"),t.sendDrawCommand(t.getLocation());r--;)t.sendDrawCommand(e.shift());this._requestRenderSize&&(t.sendDrawCommand("DOM_RENDER_SIZE"),t.sendDrawCommand(t.getLocation()),this._requestRenderSize=!1)}this._requestingUpdate=!1},i.prototype.onMount=function(t,e){this._node=t,this._id=e,this._UIEvents=t.getUIEvents().slice(0),this.draw(),this.setAttribute("data-fa-path",t.getLocation())},i.prototype.onDismount=function(){this.setProperty("display","none"),this.setAttribute("data-fa-path",""),this._initialized=!1},i.prototype.onShow=function(){this.setProperty("display","block")},i.prototype.onHide=function(){this.setProperty("display","none")},i.prototype.setCutoutState=function(t){this._changeQueue.push("GL_CUTOUT_STATE",t),this._initialized&&this._requestUpdate()},i.prototype.onTransformChange=function(t){this._changeQueue.push("CHANGE_TRANSFORM");for(var e=0,r=t.length;r>e;e++)this._changeQueue.push(t[e]);this.onUpdate()},i.prototype.onSizeChange=function(t){var e=this._node.getSizeMode(),r=e[0]!==s,i=e[1]!==s;return this._initialized&&this._changeQueue.push("CHANGE_SIZE",r?t[0]:r,i?t[1]:i),this._requestingUpdate||this._requestUpdate(),this},i.prototype.onOpacityChange=function(t){return this.setProperty("opacity",t)},i.prototype.onAddUIEvent=function(t){return-1===this._UIEvents.indexOf(t)?(this._subscribe(t),this._UIEvents.push(t)):this._inDraw&&this._subscribe(t),this},i.prototype._subscribe=function(t){this._initialized&&this._changeQueue.push("SUBSCRIBE",t,!0),this._requestingUpdate||this._requestUpdate()},i.prototype.onSizeModeChange=function(t,e,r){(t===s||e===s||r===s)&&(this._renderSized=!0,this._requestRenderSize=!0),this.onSizeChange(this._node.getSize())},i.prototype.getRenderSize=function(){return this._renderSize},i.prototype._requestUpdate=function(){this._requestingUpdate||(this._node.requestUpdate(this._id),this._requestingUpdate=!0)},i.prototype.init=function(){this._changeQueue.push("INIT_DOM",this._tagName),this._initialized=!0,this.onTransformChange(this._node.getTransform()),this.onSizeChange(this._node.getSize()),this._requestingUpdate||this._requestUpdate()},i.prototype.setId=function(t){return this.setAttribute("id",t),this},i.prototype.addClass=function(t){return this._classes.indexOf(t)<0?(this._initialized&&this._changeQueue.push("ADD_CLASS",t),this._classes.push(t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0),this):(this._inDraw&&(this._initialized&&this._changeQueue.push("ADD_CLASS",t),this._requestingUpdate||this._requestUpdate()),this)},i.prototype.removeClass=function(t){var e=this._classes.indexOf(t);return 0>e?this:(this._changeQueue.push("REMOVE_CLASS",t),this._classes.splice(e,1),this._requestingUpdate||this._requestUpdate(),this)},i.prototype.hasClass=function(t){return-1!==this._classes.indexOf(t)},i.prototype.setAttribute=function(t,e){return(this._attributes[t]!==e||this._inDraw)&&(this._attributes[t]=e,this._initialized&&this._changeQueue.push("CHANGE_ATTRIBUTE",t,e),this._requestUpdate||this._requestUpdate()),this},i.prototype.setProperty=function(t,e){return(this._styles[t]!==e||this._inDraw)&&(this._styles[t]=e,this._initialized&&this._changeQueue.push("CHANGE_PROPERTY",t,e),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.setContent=function(t){return(this._content!==t||this._inDraw)&&(this._content=t,this._initialized&&this._changeQueue.push("CHANGE_CONTENT",t),this._requestingUpdate||this._requestUpdate(),this._renderSized&&(this._requestRenderSize=!0)),this},i.prototype.on=function(t,e){return this._callbacks.on(t,e)},i.prototype.onReceive=function(t,e){"resize"===t&&(this._renderSize[0]=e.val[0],this._renderSize[1]=e.val[1],this._requestingUpdate||this._requestUpdate()),this._callbacks.trigger(t,e)},i.prototype.draw=function(){var t,e,r;for(this._inDraw=!0,this.init(),e=0,r=this._classes.length;r>e;e++)this.addClass(this._classes[e]);this._content&&this.setContent(this._content);for(t in this._styles)this._styles[t]&&this.setProperty(t,this._styles[t]);for(t in this._attributes)this._attributes[t]&&this.setAttribute(t,this._attributes[t]);for(e=0,r=this._UIEvents.length;r>e;e++)this.onAddUIEvent(this._UIEvents[e]);this._inDraw=!1},e.exports=i},{"../utilities/CallbackStore":87}],61:[function(t,e,r){"use strict";function i(t,e,r){var i=this;t.classList.add("famous-dom-renderer"),h=h||a("transform"),this._compositor=r,this._target=null,this._parent=null,this._path=null,this._children=[],this._root=new s(t,e),this._boundTriggerEvent=function(t){return i._triggerEvent(t)},this._selector=e,this._elements={},this._elements[e]=this._root,this.perspectiveTransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._VPtransform=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._size=[null,null]}function n(t){for(var e=[],r=t.target;r!==document.body;)e.push(r),r=r.parentNode;return e}var s=t("./ElementCache"),o=t("./Math"),a=t("../utilities/vendorPrefix"),u=t("./events/EventMap"),h=null;i.prototype.subscribe=function(t,e){if(this._assertTargetLoaded(),this._target.preventDefault[t]=e,this._target.subscribe[t]=!0,!this._target.listeners[t]&&!this._root.listeners[t]){var r=u[t][1]?this._root:this._target;r.listeners[t]=this._boundTriggerEvent,r.element.addEventListener(t,this._boundTriggerEvent)}},i.prototype._triggerEvent=function(t){for(var e=t.path?t.path:n(t),r=0;r<e.length;r++)if(e[r].dataset){var i=e[r].dataset.faPath;if(i&&this._elements[i]&&this._elements[i].subscribe[t.type]){t.stopPropagation(),this._elements[i].preventDefault[t.type]&&t.preventDefault();var s=u[t.type][0];this._compositor.sendEvent(i,t.type,new s(t));break}}},i.prototype.getSizeOf=function(t){var e=this._elements[t];if(!e)return null;var r={val:e.size};return this._compositor.sendEvent(t,"resize",r),r},i.prototype.getSize=function(){return this._size[0]=this._root.element.offsetWidth,this._size[1]=this._root.element.offsetHeight,this._size},i.prototype._getSize=i.prototype.getSize,i.prototype.draw=function(t){t.perspectiveDirty&&(this.perspectiveDirty=!0,this.perspectiveTransform[0]=t.perspectiveTransform[0],this.perspectiveTransform[1]=t.perspectiveTransform[1],this.perspectiveTransform[2]=t.perspectiveTransform[2],this.perspectiveTransform[3]=t.perspectiveTransform[3],this.perspectiveTransform[4]=t.perspectiveTransform[4],this.perspectiveTransform[5]=t.perspectiveTransform[5],this.perspectiveTransform[6]=t.perspectiveTransform[6],this.perspectiveTransform[7]=t.perspectiveTransform[7],this.perspectiveTransform[8]=t.perspectiveTransform[8],this.perspectiveTransform[9]=t.perspectiveTransform[9],this.perspectiveTransform[10]=t.perspectiveTransform[10],this.perspectiveTransform[11]=t.perspectiveTransform[11],this.perspectiveTransform[12]=t.perspectiveTransform[12],this.perspectiveTransform[13]=t.perspectiveTransform[13],this.perspectiveTransform[14]=t.perspectiveTransform[14],this.perspectiveTransform[15]=t.perspectiveTransform[15]),(t.viewDirty||t.perspectiveDirty)&&(o.multiply(this._VPtransform,this.perspectiveTransform,t.viewTransform),this._root.element.style[h]=this._stringifyMatrix(this._VPtransform))},i.prototype._assertPathLoaded=function(){if(!this._path)throw new Error("path not loaded")},i.prototype._assertParentLoaded=function(){if(!this._parent)throw new Error("parent not loaded")},i.prototype._assertChildrenLoaded=function(){if(!this._children)throw new Error("children not loaded")},i.prototype._assertTargetLoaded=function(){if(!this._target)throw new Error("No target loaded")},i.prototype.findParent=function(){this._assertPathLoaded();for(var t,e=this._path;!t&&e.length;)e=e.substring(0,e.lastIndexOf("/")),t=this._elements[e];return this._parent=t,t},i.prototype.findChildren=function(t){this._assertPathLoaded();var e,r=this._path+"/",i=Object.keys(this._elements),n=0;for(t=t?t:this._children,this._children.length=0;n<i.length;)-1===i[n].indexOf(r)||i[n]===r?i.splice(n,1):n++;var s,o=0;for(n=0;n<i.length;n++)for(s=i[n],o=0;o<i.length;o++)n!==o&&-1!==i[o].indexOf(s)&&(i.splice(o,1),n--);for(n=0,e=i.length;e>n;n++)t[n]=this._elements[i[n]];return t},i.prototype.findTarget=function(){return this._target=this._elements[this._path],this._target},i.prototype.loadPath=function(t){return this._path=t,this._path},i.prototype.insertEl=function(t){if(!this._target||this._target.element.tagName.toLowerCase()!==t.toLowerCase()){this.findParent(),this.findChildren(),this._assertParentLoaded(),this._assertChildrenLoaded(),this._target&&this._parent.element.removeChild(this._target.element),this._target=new s(document.createElement(t),this._path),this._parent.element.appendChild(this._target.element),this._elements[this._path]=this._target;for(var e=0,r=this._children.length;r>e;e++)this._target.element.appendChild(this._children[e].element)}},i.prototype.setProperty=function(t,e){this._assertTargetLoaded(),this._target.element.style[t]=e},i.prototype.setSize=function(t,e){this._assertTargetLoaded(),this.setWidth(t),this.setHeight(e)},i.prototype.setWidth=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitWidth=!0,e&&(e.style.width=""),t=e?e.offsetWidth:0,this._target.element.style.width=t+"px"):(this._target.explicitWidth=!1,e&&(e.style.width=t+"px"),this._target.element.style.width=t+"px"),this._target.size[0]=t},i.prototype.setHeight=function(t){this._assertTargetLoaded();var e=this._target.content;t===!1?(this._target.explicitHeight=!0,e&&(e.style.height=""),t=e?e.offsetHeight:0,this._target.element.style.height=t+"px"):(this._target.explicitHeight=!1,e&&(e.style.height=t+"px"),this._target.element.style.height=t+"px"),this._target.size[1]=t},i.prototype.setAttribute=function(t,e){this._assertTargetLoaded(),this._target.element.setAttribute(t,e)},i.prototype.setContent=function(t){this._assertTargetLoaded(),this.findChildren(),this._target.content||(this._target.content=document.createElement("div"),this._target.content.classList.add("famous-dom-element-content"),this._target.element.insertBefore(this._target.content,this._target.element.firstChild)),this._target.content.innerHTML=t,this.setSize(this._target.explicitWidth?!1:this._target.size[0],this._target.explicitHeight?!1:this._target.size[1])},i.prototype.setMatrix=function(t){this._assertTargetLoaded(),this.findParent();var e,r,i=this._target.worldTransform,n=!1;if(t)for(e=0,r=16;r>e;e++)n=n?n:i[e]===t[e],i[e]=t[e];else n=!0;if(n){o.invert(this._target.invertedParent,this._parent.worldTransform),o.multiply(this._target.finalTransform,this._target.invertedParent,i);var s=this.findChildren([]),a=this._path,u=this._target;for(e=0,r=s.length;r>e;e++)this._target=s[e],this._path=this._target.path,this.setMatrix();this._path=a,this._target=u}this._target.element.style[h]=this._stringifyMatrix(this._target.finalTransform)},i.prototype.addClass=function(t){this._assertTargetLoaded(),this._target.element.classList.add(t)},i.prototype.removeClass=function(t){this._assertTargetLoaded(),this._target.element.classList.remove(t)},i.prototype._stringifyMatrix=function(t){var e="matrix3d(";return e+=t[0]<1e-6&&t[0]>-1e-6?"0,":t[0]+",",e+=t[1]<1e-6&&t[1]>-1e-6?"0,":t[1]+",",e+=t[2]<1e-6&&t[2]>-1e-6?"0,":t[2]+",",e+=t[3]<1e-6&&t[3]>-1e-6?"0,":t[3]+",",e+=t[4]<1e-6&&t[4]>-1e-6?"0,":t[4]+",",e+=t[5]<1e-6&&t[5]>-1e-6?"0,":t[5]+",",e+=t[6]<1e-6&&t[6]>-1e-6?"0,":t[6]+",",e+=t[7]<1e-6&&t[7]>-1e-6?"0,":t[7]+",",e+=t[8]<1e-6&&t[8]>-1e-6?"0,":t[8]+",",e+=t[9]<1e-6&&t[9]>-1e-6?"0,":t[9]+",",e+=t[10]<1e-6&&t[10]>-1e-6?"0,":t[10]+",",e+=t[11]<1e-6&&t[11]>-1e-6?"0,":t[11]+",",e+=t[12]<1e-6&&t[12]>-1e-6?"0,":t[12]+",",e+=t[13]<1e-6&&t[13]>-1e-6?"0,":t[13]+",",e+=t[14]<1e-6&&t[14]>-1e-6?"0,":t[14]+",",e+=t[15]+")"},e.exports=i},{"../utilities/vendorPrefix":90,"./ElementCache":62,"./Math":63,"./events/EventMap":66}],62:[function(t,e,r){"use strict";function i(t,e){this.element=t,this.path=e,this.content=null,this.size=new Int16Array(3),this.explicitHeight=!1,this.explicitWidth=!1,this.worldTransform=new Float32Array(n),this.invertedParent=new Float32Array(n),this.finalTransform=new Float32Array(n),this.postRenderSize=new Float32Array(2),this.listeners={},this.preventDefault={},this.subscribe={}}var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.exports=i},{}],63:[function(t,e,r){"use strict";function i(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],_=e[14],g=e[15],y=r*a-i*o,v=r*u-n*o,b=r*h-s*o,w=i*u-n*a,x=i*h-s*a,E=n*h-s*u,T=c*m-l*d,S=c*_-p*d,C=c*g-f*d,O=l*_-p*m,R=l*g-f*m,M=p*g-f*_,A=y*M-v*R+b*O+w*C-x*S+E*T;return A?(A=1/A,t[0]=(a*M-u*R+h*O)*A,t[1]=(n*R-i*M-s*O)*A,t[2]=(m*E-_*x+g*w)*A,t[3]=(p*x-l*E-f*w)*A,t[4]=(u*C-o*M-h*S)*A,t[5]=(r*M-n*C+s*S)*A,t[6]=(_*b-d*E-g*v)*A,t[7]=(c*E-p*b+f*v)*A,t[8]=(o*R-a*C+h*T)*A,t[9]=(i*C-r*R-s*T)*A,t[10]=(d*x-m*b+g*y)*A,t[11]=(l*b-c*x-f*y)*A,t[12]=(a*S-o*O-u*T)*A,t[13]=(r*O-i*S+n*T)*A,t[14]=(m*v-d*w-_*y)*A,t[15]=(c*w-l*v+p*y)*A,t):null}function n(t,e,r){var i,n,s,o,a=e[0],u=e[1],h=e[2],c=e[3],l=e[4],p=e[5],f=e[6],d=e[7],m=e[8],_=e[9],g=e[10],y=e[11],v=e[12],b=e[13],w=e[14],x=e[15],E=r[0],T=r[1],S=r[2],C=r[3],O=r[4],R=r[5],M=r[6],A=r[7],z=r[8],L=r[9],U=r[10],I=r[11],D=r[12],P=r[13],k=r[14],j=r[15],F=!1;return i=E*a+T*l+S*m+C*v,n=E*u+T*p+S*_+C*b,s=E*h+T*f+S*g+C*w,o=E*c+T*d+S*y+C*x,F=F?F:i===t[0]||n===t[1]||s===t[2]||o===t[3],t[0]=i,t[1]=n,t[2]=s,t[3]=o,E=O,T=R,S=M,C=A,i=E*a+T*l+S*m+C*v,n=E*u+T*p+S*_+C*b,s=E*h+T*f+S*g+C*w,o=E*c+T*d+S*y+C*x,F=F?F:i===t[4]||n===t[5]||s===t[6]||o===t[7],t[4]=i,t[5]=n,t[6]=s,t[7]=o,E=z,T=L,S=U,C=I,i=E*a+T*l+S*m+C*v,n=E*u+T*p+S*_+C*b,s=E*h+T*f+S*g+C*w,o=E*c+T*d+S*y+C*x,F=F?F:i===t[8]||n===t[9]||s===t[10]||o===t[11],t[8]=i,t[9]=n,t[10]=s,t[11]=o,E=D,T=P,S=k,C=j,i=E*a+T*l+S*m+C*v,n=E*u+T*p+S*_+C*b,s=E*h+T*f+S*g+C*w,o=E*c+T*d+S*y+C*x,F=F?F:i===t[12]||n===t[13]||s===t[14]||o===t[15],t[12]=i,t[13]=n,t[14]=s,t[15]=o,t}e.exports={multiply:n,invert:i}},{}],64:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.data=t.data}var n=t("./UIEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"CompositionEvent"},e.exports=i},{"./UIEvent":72}],65:[function(t,e,r){"use strict";function i(t){this.type=t.type,this.defaultPrevented=t.defaultPrevented,this.timeStamp=t.timeStamp;var e=t.target.constructor;(e===HTMLInputElement||e===HTMLTextAreaElement||e===HTMLSelectElement)&&(this.value=t.target.value);
}i.prototype.toString=function(){return"Event"},e.exports=i},{}],66:[function(t,e,r){"use strict";var i=t("./CompositionEvent"),n=t("./Event"),s=t("./FocusEvent"),o=t("./InputEvent"),a=t("./KeyboardEvent"),u=t("./MouseEvent"),h=t("./TouchEvent"),c=t("./UIEvent"),l=t("./WheelEvent"),p={change:[n,!0],submit:[n,!0],abort:[n,!1],beforeinput:[o,!0],blur:[s,!1],click:[u,!0],compositionend:[i,!0],compositionstart:[i,!0],compositionupdate:[i,!0],dblclick:[u,!0],focus:[s,!1],focusin:[s,!0],focusout:[s,!0],input:[o,!0],keydown:[a,!0],keyup:[a,!0],load:[n,!1],mousedown:[u,!0],mouseenter:[u,!1],mouseleave:[u,!1],mousemove:[u,!1],mouseout:[u,!0],mouseover:[u,!0],mouseup:[u,!0],resize:[c,!1],scroll:[c,!1],select:[n,!0],unload:[n,!1],wheel:[l,!0],touchcancel:[h,!0],touchend:[h,!0],touchmove:[h,!0],touchstart:[h,!0]};e.exports=p},{"./CompositionEvent":64,"./Event":65,"./FocusEvent":67,"./InputEvent":68,"./KeyboardEvent":69,"./MouseEvent":70,"./TouchEvent":71,"./UIEvent":72,"./WheelEvent":73}],67:[function(t,e,r){"use strict";function i(t){n.call(this,t)}var n=t("./UIEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"FocusEvent"},e.exports=i},{"./UIEvent":72}],68:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.inputType=t.inputType,this.data=t.data,this.isComposing=t.isComposing,this.targetRange=t.targetRange}var n=t("./UIEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"InputEvent"},e.exports=i},{"./UIEvent":72}],69:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.DOM_KEY_LOCATION_STANDARD=0,this.DOM_KEY_LOCATION_LEFT=1,this.DOM_KEY_LOCATION_RIGHT=2,this.DOM_KEY_LOCATION_NUMPAD=3,this.key=t.key,this.code=t.code,this.location=t.location,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.repeat=t.repeat,this.isComposing=t.isComposing,this.keyCode=t.keyCode}var n=t("./UIEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"KeyboardEvent"},e.exports=i},{"./UIEvent":72}],70:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.pageX=t.pageX,this.pageY=t.pageY,this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY}var n=t("./UIEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"MouseEvent"},e.exports=i},{"./UIEvent":72}],71:[function(t,e,r){"use strict";function i(t){this.identifier=t.identifier,this.screenX=t.screenX,this.screenY=t.screenY,this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY}function n(t){if(!t)return a;for(var e=[],r=0;r<t.length;r++)e[r]=new i(t[r]);return e}function s(t){o.call(this,t),this.touches=n(t.touches),this.targetTouches=n(t.targetTouches),this.changedTouches=n(t.changedTouches),this.altKey=t.altKey,this.metaKey=t.metaKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey}var o=t("./UIEvent"),a=[];s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return"TouchEvent"},e.exports=s},{"./UIEvent":72}],72:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.detail=t.detail}var n=t("./Event");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"UIEvent"},e.exports=i},{"./Event":65}],73:[function(t,e,r){"use strict";function i(t){n.call(this,t),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2,this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.deltaMode=t.deltaMode}var n=t("./MouseEvent");i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return"WheelEvent"},e.exports=i},{"./MouseEvent":70}],74:[function(t,e,r){"use strict";var i=function(t,e){t instanceof Array||t instanceof Float32Array?(this.x=t[0]||0,this.y=t[1]||0):(this.x=t||0,this.y=e||0)};i.prototype.set=function(t,e){return null!=t&&(this.x=t),null!=e&&(this.y=e),this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.scale=function(t){return t instanceof i?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},i.prototype.rotate=function(t){var e=this.x,r=this.y,i=Math.cos(t),n=Math.sin(t);return this.x=e*i-r*n,this.y=e*n+r*i,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.invert=function(){return this.x*=-1,this.y*=-1,this},i.prototype.map=function(t){return this.x=t(this.x),this.y=t(this.y),this},i.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.clear=function(){return this.x=0,this.y=0,this},i.prototype.isZero=function(){return 0!==this.x||0!==this.y?!1:!0},i.prototype.toArray=function(){return[this.x,this.y]},i.normalize=function(t,e){var r=t.x,i=t.y,n=Math.sqrt(r*r+i*i)||1;return n=1/n,e.x=t.x*n,e.y=t.y*n,e},i.clone=function(t){return new i(t.x,t.y)},i.add=function(t,e,r){return r.x=t.x+e.x,r.y=t.y+e.y,r},i.subtract=function(t,e,r){return r.x=t.x-e.x,r.y=t.y-e.y,r},i.scale=function(t,e,r){return r.x=t.x*e,r.y=t.y*e,r},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},e.exports=i},{}],75:[function(t,e,r){"use strict";var i=function(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0};i.prototype.set=function(t,e,r){return null!=t&&(this.x=t),null!=e&&(this.y=e),null!=r&&(this.z=r),this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.prototype.rotateX=function(t){var e=this.y,r=this.z,i=Math.cos(t),n=Math.sin(t);return this.y=e*i-r*n,this.z=e*n+r*i,this},i.prototype.rotateY=function(t){var e=this.x,r=this.z,i=Math.cos(t),n=Math.sin(t);return this.x=r*n+e*i,this.z=r*i-e*n,this},i.prototype.rotateZ=function(t){var e=this.x,r=this.y,i=Math.cos(t),n=Math.sin(t);return this.x=e*i-r*n,this.y=e*n+r*i,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.cross=function(t){var e=this.x,r=this.y,i=this.z,n=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*n-e*o,this.z=e*s-r*n,this},i.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.prototype.invert=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.prototype.map=function(t){return this.x=t(this.x),this.y=t(this.y),this.z=t(this.z),this},i.prototype.length=function(){var t=this.x,e=this.y,r=this.z;return Math.sqrt(t*t+e*e+r*r)},i.prototype.lengthSq=function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.prototype.clear=function(){return this.x=0,this.y=0,this.z=0,this},i.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},i.prototype.toArray=function(){return[this.x,this.y,this.z]},i.prototype.normalize=function(){var t=this.x,e=this.y,r=this.z,i=Math.sqrt(t*t+e*e+r*r)||1;return i=1/i,this.x*=i,this.y*=i,this.z*=i,this},i.prototype.applyRotation=function(t){var e=t.w,r=-t.x,i=-t.y,n=-t.z,s=this.x,o=this.y,a=this.z,u=-r*s-i*o-n*a,h=s*e+o*n-i*a,c=o*e+r*a-s*n,l=a*e+s*i-r*o,p=e,f=-r,d=-i,m=-n;return this.x=h*p+f*u+d*l-c*m,this.y=c*p+d*u+h*m-f*l,this.z=l*p+m*u+f*c-h*d,this},i.prototype.applyMatrix=function(t){var e=t.get(),r=this.x,i=this.y,n=this.z;return this.x=e[0]*r+e[1]*i+e[2]*n,this.y=e[3]*r+e[4]*i+e[5]*n,this.z=e[6]*r+e[7]*i+e[8]*n,this},i.normalize=function(t,e){var r=t.x,i=t.y,n=t.z,s=Math.sqrt(r*r+i*i+n*n)||1;return s=1/s,e.x=r*s,e.y=i*s,e.z=n*s,e},i.applyRotation=function(t,e,r){var i=e.w,n=-e.x,s=-e.y,o=-e.z,a=t.x,u=t.y,h=t.z,c=-n*a-s*u-o*h,l=a*i+u*o-s*h,p=u*i+n*h-a*o,f=h*i+a*s-n*u,d=i,m=-n,_=-s,g=-o;return r.x=l*d+m*c+_*f-p*g,r.y=p*d+_*c+l*g-m*f,r.z=f*d+g*c+m*p-l*_,r},i.clone=function(t){return new i(t.x,t.y,t.z)},i.add=function(t,e,r){return r.x=t.x+e.x,r.y=t.y+e.y,r.z=t.z+e.z,r},i.subtract=function(t,e,r){return r.x=t.x-e.x,r.y=t.y-e.y,r.z=t.z-e.z,r},i.scale=function(t,e,r){return r.x=t.x*e,r.y=t.y*e,r.z=t.z*e,r},i.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},i.cross=function(t,e,r){var i=t.x,n=t.y,s=t.z,o=e.x,a=e.y,u=e.z;return r.x=n*u-s*a,r.y=s*o-i*u,r.z=i*a-n*o,r},i.project=function(t,e,r){var i=t.x,n=t.y,s=t.z,o=e.x,a=e.y,u=e.z,h=i*o+n*a+s*u;return h/=o*o+a*a+u*u,r.x=o*h,r.y=a*h,r.z=u*h,r},e.exports=i},{}],76:[function(t,e,r){function i(){throw new Error("You should bundle your code using `glslify` as a transform.")}e.exports=i},{}],77:[function(t,e,r){function i(t,e,r,i){return{vertex:t,fragment:e,uniforms:r,attributes:i}}e.exports=i},{}],78:[function(t,e,r){"use strict";var i,n,s=0,o=["ms","moz","webkit","o"];if("object"==typeof window){i=window.requestAnimationFrame,n=window.cancelAnimationFrame||window.cancelRequestAnimationFrame;for(var a=0;a<o.length&&!i;++a)i=window[o[a]+"RequestAnimationFrame"],n=window[o[a]+"CancelRequestAnimationFrame"]||window[o[a]+"CancelAnimationFrame"];i&&!n&&(i=null)}if(!i){var u=Date.now?Date.now:function(){return(new Date).getTime()};i=function(t){var e=u(),r=Math.max(0,16-(e-s)),i=setTimeout(function(){t(e+r)},r);return s=e+r,i},n=function(t){clearTimeout(t)}}var h={requestAnimationFrame:i,cancelAnimationFrame:n};e.exports=h},{}],79:[function(t,e,r){"use strict";e.exports={requestAnimationFrame:t("./animationFrame").requestAnimationFrame,cancelAnimationFrame:t("./animationFrame").cancelAnimationFrame}},{"./animationFrame":78}],80:[function(t,e,r){"use strict";function i(){var t=this;this._updates=[],this._looper=function(e){t.loop(e)},this._time=0,this._stoppedAt=0,this._sleep=0,this._startOnVisibilityChange=!0,this._rAF=null,this._sleepDiff=!0,this.start(),a&&document.addEventListener(h,function(){t._onVisibilityChange()})}var n=t("../polyfills"),s=n.requestAnimationFrame,o=n.cancelAnimationFrame,a="undefined"!=typeof document;if(a){var u,h;"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange")}i.prototype._onVisibilityChange=function(){document[u]?this._onUnfocus():this._onFocus()},i.prototype._onFocus=function(){this._startOnVisibilityChange&&this._start()},i.prototype._onUnfocus=function(){this._stop()},i.prototype.start=function(){return this._running||(this._startOnVisibilityChange=!0,this._start()),this},i.prototype._start=function(){this._running=!0,this._sleepDiff=!0,this._rAF=s(this._looper)},i.prototype.stop=function(){return this._running&&(this._startOnVisibilityChange=!1,this._stop()),this},i.prototype._stop=function(){this._running=!1,this._stoppedAt=this._time,o(this._rAF)},i.prototype.isRunning=function(){return this._running},i.prototype.step=function(t){this._time=t,this._sleepDiff&&(this._sleep+=t-this._stoppedAt,this._sleepDiff=!1);for(var e=t-this._sleep,r=0,i=this._updates.length;i>r;r++)this._updates[r].update(e);return this},i.prototype.loop=function(t){return this.step(t),this._rAF=s(this._looper),this},i.prototype.update=function(t){return-1===this._updates.indexOf(t)&&this._updates.push(t),this},i.prototype.noLongerUpdate=function(t){var e=this._updates.indexOf(t);return e>-1&&this._updates.splice(e,1),this},e.exports=i},{"../polyfills":79}],81:[function(t,e,r){"use strict";function i(){s(),this._contexts={},this._outCommands=[],this._inCommands=[],this._time=null,this._resized=!1;var t=this;window.addEventListener("resize",function(){t._resized=!0})}var n=t("./Context"),s=t("./inject-css");i.prototype.getTime=function(){return this._time},i.prototype.sendEvent=function(t,e,r){this._outCommands.push("WITH",t,"TRIGGER",e,r)},i.prototype.sendResize=function(t,e){this.sendEvent(t,"CONTEXT_RESIZE",e)},i.prototype.handleWith=function(t,e){var r=e[t],i=r.split("/"),n=this.getOrSetContext(i.shift());return n.receive(r,e,t)},i.prototype.getOrSetContext=function(t){if(this._contexts[t])return this._contexts[t];var e=new n(t,this);return this._contexts[t]=e,e},i.prototype.giveSizeFor=function(t,e){var r=e[t],i=this.getOrSetContext(r).getRootSize();this.sendResize(r,i)},i.prototype.drawCommands=function(){for(var t=this._inCommands,e=0,r=t[e];r;){switch(r){case"TIME":this._time=t[++e];break;case"WITH":e=this.handleWith(++e,t);break;case"NEED_SIZE_FOR":this.giveSizeFor(++e,t)}r=t[++e]}for(var i in this._contexts)this._contexts[i].draw();return this._resized&&this.updateSize(),this._outCommands},i.prototype.updateSize=function(){for(var t in this._contexts)this._contexts[t].updateSize()},i.prototype.receiveCommands=function(t){for(var e=t.length,r=0;e>r;r++)this._inCommands.push(t[r])},i.prototype.clearCommands=function(){this._inCommands.length=0,this._outCommands.length=0,this._resized=!1},e.exports=i},{"./Context":82,"./inject-css":84}],82:[function(t,e,r){"use strict";function i(t,e){this._compositor=e,this._rootEl=document.querySelector(t),this._selector=t;var r=document.createElement("div");this._rootEl.appendChild(r),this.DOMRenderer=new o(r,t,e),this.WebGLRenderer=null,this.canvas=null,this._renderState={projectionType:s.ORTHOGRAPHIC_PROJECTION,perspectiveTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewTransform:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),viewDirty:!1,perspectiveDirty:!1},this._size=[],this._children={},this._elementHash={},this._meshTransform=[],this._meshSize=[0,0,0]}var n=t("../webgl-renderers/WebGLRenderer"),s=t("../components/Camera"),o=t("../dom-renderers/DOMRenderer");i.prototype.updateSize=function(){var t=this.DOMRenderer.getSize();return this._compositor.sendResize(this._selector,t),this.canvas&&this.WebGLRenderer&&this.WebGLRenderer.updateSize(t),this},i.prototype.draw=function(){this.DOMRenderer.draw(this._renderState),this.WebGLRenderer&&this.WebGLRenderer.draw(this._renderState),this._renderState.perspectiveDirty&&(this._renderState.perspectiveDirty=!1),this._renderState.viewDirty&&(this._renderState.viewDirty=!1)},i.prototype.getRootSize=function(){return this.DOMRenderer.getSize()},i.prototype.initWebGL=function(){this.canvas=document.createElement("canvas"),this._rootEl.appendChild(this.canvas),this.WebGLRenderer=new n(this.canvas,this._compositor),this.updateSize()},i.prototype.receive=function(t,e,r){var i=r,n=e[++i];for(this.DOMRenderer.loadPath(t),this.DOMRenderer.findTarget();n;){switch(n){case"INIT_DOM":this.DOMRenderer.insertEl(e[++i]);break;case"DOM_RENDER_SIZE":this.DOMRenderer.getSizeOf(e[++i]);break;case"CHANGE_TRANSFORM":for(var o=0;16>o;o++)this._meshTransform[o]=e[++i];this.DOMRenderer.setMatrix(this._meshTransform),this.WebGLRenderer&&this.WebGLRenderer.setCutoutUniform(t,"u_transform",this._meshTransform);break;case"CHANGE_SIZE":var a=e[++i],u=e[++i];this.DOMRenderer.setSize(a,u),this.WebGLRenderer&&(this._meshSize[0]=a,this._meshSize[1]=u,this.WebGLRenderer.setCutoutUniform(t,"u_size",this._meshSize));break;case"CHANGE_PROPERTY":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setProperty(e[++i],e[++i]);break;case"CHANGE_CONTENT":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setContent(e[++i]);break;case"CHANGE_ATTRIBUTE":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.setAttribute(e[++i],e[++i]);break;case"ADD_CLASS":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.addClass(e[++i]);break;case"REMOVE_CLASS":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.removeClass(e[++i]);break;case"SUBSCRIBE":this.WebGLRenderer&&this.WebGLRenderer.getOrSetCutout(t),this.DOMRenderer.subscribe(e[++i],e[++i]);break;case"GL_SET_DRAW_OPTIONS":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshOptions(t,e[++i]);break;case"GL_AMBIENT_LIGHT":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setAmbientLightColor(t,e[++i],e[++i],e[++i]);break;case"GL_LIGHT_POSITION":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setLightPosition(t,e[++i],e[++i],e[++i]);break;case"GL_LIGHT_COLOR":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setLightColor(t,e[++i],e[++i],e[++i]);break;case"MATERIAL_INPUT":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.handleMaterialInput(t,e[++i],e[++i]);break;case"GL_SET_GEOMETRY":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setGeometry(t,e[++i],e[++i],e[++i]);break;case"GL_UNIFORMS":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshUniform(t,e[++i],e[++i]);break;case"GL_BUFFER_DATA":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.bufferData(t,e[++i],e[++i],e[++i],e[++i],e[++i]);break;case"GL_CUTOUT_STATE":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setCutoutState(t,e[++i]);break;case"GL_MESH_VISIBILITY":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.setMeshVisibility(t,e[++i]);break;case"GL_REMOVE_MESH":this.WebGLRenderer||this.initWebGL(),this.WebGLRenderer.removeMesh(t);break;case"PINHOLE_PROJECTION":this._renderState.projectionType=s.PINHOLE_PROJECTION,this._renderState.perspectiveTransform[11]=-1/e[++i],this._renderState.perspectiveDirty=!0;break;case"ORTHOGRAPHIC_PROJECTION":this._renderState.projectionType=s.ORTHOGRAPHIC_PROJECTION,this._renderState.perspectiveTransform[11]=0,this._renderState.perspectiveDirty=!0;break;case"CHANGE_VIEW_TRANSFORM":this._renderState.viewTransform[0]=e[++i],this._renderState.viewTransform[1]=e[++i],this._renderState.viewTransform[2]=e[++i],this._renderState.viewTransform[3]=e[++i],this._renderState.viewTransform[4]=e[++i],this._renderState.viewTransform[5]=e[++i],this._renderState.viewTransform[6]=e[++i],this._renderState.viewTransform[7]=e[++i],this._renderState.viewTransform[8]=e[++i],this._renderState.viewTransform[9]=e[++i],this._renderState.viewTransform[10]=e[++i],this._renderState.viewTransform[11]=e[++i],this._renderState.viewTransform[12]=e[++i],this._renderState.viewTransform[13]=e[++i],this._renderState.viewTransform[14]=e[++i],this._renderState.viewTransform[15]=e[++i],this._renderState.viewDirty=!0;break;case"WITH":return i-1}n=e[++i]}return i},e.exports=i},{"../components/Camera":50,"../dom-renderers/DOMRenderer":61,"../webgl-renderers/WebGLRenderer":100}],83:[function(t,e,r){"use strict";function i(t,e,r){this._thread=t,this._compositor=e,this._renderLoop=r,this._renderLoop.update(this);var i=this;this._thread.onmessage=function(t){var e=t.data?t.data:t;if("ENGINE"===e[0])switch(e[1]){case"START":i._renderLoop.start();break;case"STOP":i._renderLoop.stop();break;default:console.error('Unknown ENGINE command "'+e[1]+'"')}else i._compositor.receiveCommands(e)},this._thread.onerror=function(t){console.error(t)}}i.prototype.getThread=function(){return this._thread},i.prototype.getCompositor=function(){return this._compositor},i.prototype.getEngine=function(){return this._renderLoop},i.prototype.update=function(t){this._thread.postMessage(["FRAME",t]);var e=this._compositor.drawCommands();this._thread.postMessage(e),this._compositor.clearCommands()},e.exports=i},{}],84:[function(t,e,r){"use strict";function i(){if(!s)if(s=!0,document.createStyleSheet){var t=document.createStyleSheet();t.cssText=n}else{var e=document.getElementsByTagName("head")[0],r=document.createElement("style");r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(e?e:document.documentElement).appendChild(r)}}var n=".famous-dom-renderer {width:100%;height:100%;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;}.famous-dom-element {-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-tap-highlight-color:transparent;pointer-events:auto;z-index:1;}.famous-dom-element-content,.famous-dom-element {position:absolute;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}.famous-webgl-renderer {-webkit-transform:translateZ(1000000px);transform:translateZ(1000000px);pointer-events:none;position:absolute;z-index:1;top:0;width:100%;height:100%;}",s="undefined"==typeof document;e.exports=i},{}],85:[function(t,e,r){"use strict";var i={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t},inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:1===t?1:(r||(r=.3),e=r/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r)))},outElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:1===t?1:(r||(r=.3),e=r/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/r)+1)},inOutElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:2===(t/=.5)?1:(r||(r=.3*1.5),e=r/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-i.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*i.inBounce(2*t):.5*i.outBounce(2*t-1)+.5},flat:function(){return 0}};e.exports=i},{}],86:[function(t,e,r){"use strict";function i(t){this._queue=[],this._from=null,this._state=null,this._startedAt=null,this._pausedAt=null,null!=t&&this.from(t)}var n=t("./Curves"),s=t("../core/FamousEngine");i.Clock=s.getClock(),i.prototype.to=function(t,e,r,i,s){return e=null!=e&&e.constructor===String?n[e]:e,0===this._queue.length&&(this._startedAt=this.constructor.Clock.now(),this._pausedAt=null),this._queue.push(t,null!=e?e:n.linear,null!=r?r:100,i,s),this},i.prototype.from=function(t){return this._state=t,this._from=this._sync(null,this._state),this._queue.length=0,this._startedAt=this.constructor.Clock.now(),this._pausedAt=null,this},i.prototype.delay=function(t,e){var r=this._queue.length>0?this._queue[this._queue.length-5]:this._state;return this.to(r,n.flat,t,e)},i.prototype.override=function(t,e,r,i,s){return this._queue.length>0&&(null!=t&&(this._queue[0]=t),null!=e&&(this._queue[1]=e.constructor===String?n[e]:e),null!=r&&(this._queue[2]=r),null!=i&&(this._queue[3]=i),null!=s&&(this._queue[4]=s)),this},i.prototype._interpolate=function(t,e,r,i,n){if(r instanceof Object)if("slerp"===n){var s,o,a,u,h,c,l,p,f,d,m,_,g;if(s=e[0],o=e[1],a=e[2],u=e[3],h=r[0],c=r[1],l=r[2],p=r[3],1===i)return t[0]=h,t[1]=c,t[2]=l,t[3]=p,t;d=u*p+s*h+o*c+a*l,1-d>1e-5?(f=Math.acos(d),m=Math.sin(f),_=Math.sin((1-i)*f)/m,g=Math.sin(i*f)/m):(_=1-i,g=i),t[0]=s*_+h*g,t[1]=o*_+c*g,t[2]=a*_+l*g,t[3]=u*_+p*g}else if(r instanceof Array)for(var y=0,v=r.length;v>y;y++)t[y]=this._interpolate(t[y],e[y],r[y],i,n);else for(var b in r)t[b]=this._interpolate(t[b],e[b],r[b],i,n);else t=e+i*(r-e);return t},i.prototype._sync=function t(e,r){if("number"==typeof r)e=r;else if(r instanceof Array){null==e&&(e=[]);for(var i=0,n=r.length;n>i;i++)e[i]=t(e[i],r[i])}else if(r instanceof Object){null==e&&(e={});for(var s in r)e[s]=t(e[s],r[s])}return e},i.prototype.get=function(t){if(0===this._queue.length)return this._state;t=this._pausedAt?this._pausedAt:t,t=t?t:this.constructor.Clock.now();var e=(t-this._startedAt)/this._queue[2];this._state=this._interpolate(this._state,this._from,this._queue[0],this._queue[1](e>1?1:e),this._queue[4]);var r=this._state;if(e>=1){this._startedAt=this._startedAt+this._queue[2],this._from=this._sync(this._from,this._state),this._queue.shift(),this._queue.shift(),this._queue.shift();var i=this._queue.shift();this._queue.shift(),i&&i()}return e>1?this.get():r},i.prototype.isActive=function(){return this._queue.length>0},i.prototype.halt=function(){return this.from(this.get())},i.prototype.pause=function(){return this._pausedAt=this.constructor.Clock.now(),this},i.prototype.isPaused=function(){return!!this._pausedAt},i.prototype.resume=function(){var t=this._pausedAt-this._startedAt;return this._startedAt=this.constructor.Clock.now()-t,this._pausedAt=null,this},i.prototype.reset=function(t){return this.from(t)},i.prototype.set=function(t,e,r){return null==e?(this.from(t),r&&r()):this.to(t,e.curve,e.duration,r,e.method),this},e.exports=i},{"../core/FamousEngine":55,"./Curves":85}],87:[function(t,e,r){"use strict";function i(){this._events={}}i.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]);var r=this._events[t];return r.push(e),function(){r.splice(r.indexOf(e),1)}},i.prototype.off=function(t,e){var r=this._events[t];return r&&r.splice(r.indexOf(e),1),this},i.prototype.trigger=function(t,e){var r=this._events[t];if(r)for(var i=0,n=r.length;n>i;i++)r[i](e);return this},e.exports=i},{}],88:[function(t,e,r){"use strict";var i=function t(e){var r;if("object"==typeof e){r=e instanceof Array?[]:{};for(var i in e)if("object"==typeof e[i]&&null!==e[i])if(e[i]instanceof Array){r[i]=new Array(e[i].length);for(var n=0;n<e[i].length;n++)r[i][n]=t(e[i][n])}else r[i]=t(e[i]);else r[i]=e[i]}else r=e;return r};e.exports=i},{}],89:[function(t,e,r){"use strict";e.exports=function(t){var e=[],r=[],i=0;for(var n in t)t.hasOwnProperty(n)&&(e[i]=n,r[i]=t[n],i++);return{keys:e,values:r}}},{}],90:[function(t,e,r){"use strict";function i(t){for(var e=0;e<n.length;e++){var r=n[e]+t;if(""===document.documentElement.style[r])return r}return t}var n=["","-ms-","-webkit-","-moz-","-o-"];e.exports=i},{}],91:[function(t,e,r){"use strict";function i(t){if(this.options=t||{},this.DEFAULT_BUFFER_SIZE=3,this.spec={id:n++,dynamic:!1,type:this.options.type||"TRIANGLES",bufferNames:[],bufferValues:[],bufferSpacings:[],invalidations:[]},this.options.buffers)for(var e=this.options.buffers.length,r=0;e>r;)this.spec.bufferNames.push(this.options.buffers[r].name),this.spec.bufferValues.push(this.options.buffers[r].data),this.spec.bufferSpacings.push(this.options.buffers[r].size||this.DEFAULT_BUFFER_SIZE),this.spec.invalidations.push(r++)}var n=0;e.exports=i},{}],92:[function(t,e,r){"use strict";function i(t,e){return-(e+(t-e)/2)}function n(t,e){return 1/((t-e)/2)}var s=t("../math/Vec3"),o=t("../math/Vec2"),a=[new s,new s,new s,new o,new o],u={};u.generateParametric=function(t,e,r,i){var n,s,o,a,u=[],h=i?Math.PI+Math.PI/(t-1):Math.PI,c=[];for(n=0;t+1>n;n++)for(s=n*h/t,a=0;e>a;a++)o=2*a*h/e,r(s,o,c),u.push(c[0],c[1],c[2]);var l,p=[],f=0;for(n=0;t>n;n++){for(a=0;e>a;a++)l=(a+1)%e,p.push(f+a,f+a+e,f+l),p.push(f+l,f+a+e,f+l+e);f+=e}return{vertices:u,indices:p}},u.computeNormals=function(t,e,r){var i,n,s,o,u,h,c,l,p,f,d=r||[],m=e.length/3;for(h=0;m>h;h++)n=3*e[3*h+0],i=3*e[3*h+1],s=3*e[3*h+2],a[0].set(t[i],t[i+1],t[i+2]),a[1].set(t[n],t[n+1],t[n+2]),a[2].set(t[s],t[s+1],t[s+2]),o=a[2].subtract(a[0]).cross(a[1].subtract(a[0])).normalize(),d[i+0]=(d[i+0]||0)+o.x,d[i+1]=(d[i+1]||0)+o.y,d[i+2]=(d[i+2]||0)+o.z,d[n+0]=(d[n+0]||0)+o.x,d[n+1]=(d[n+1]||0)+o.y,d[n+2]=(d[n+2]||0)+o.z,d[s+0]=(d[s+0]||0)+o.x,d[s+1]=(d[s+1]||0)+o.y,d[s+2]=(d[s+2]||0)+o.z;for(h=0;h<d.length;h+=3)for(c=d[h],l=d[h+1],p=d[h+2],f=Math.sqrt(c*c+l*l+p*p),u=0;3>u;u++)d[h+u]/=f;return d},u.subdivide=function(t,e,r){for(var i,n,u,h,c,l,p=t.length/3;p--;)i=t.slice(3*p,3*p+3),c=i.map(function(t){return new s(e[3*t],e[3*t+1],e[3*t+2])}),e.push.apply(e,s.scale(s.add(c[0],c[1],a[0]),.5,a[1]).toArray()),e.push.apply(e,s.scale(s.add(c[1],c[2],a[0]),.5,a[1]).toArray()),e.push.apply(e,s.scale(s.add(c[0],c[2],a[0]),.5,a[1]).toArray()),r&&(l=i.map(function(t){return new o(r[2*t],r[2*t+1])}),r.push.apply(r,o.scale(o.add(l[0],l[1],a[3]),.5,a[4]).toArray()),r.push.apply(r,o.scale(o.add(l[1],l[2],a[3]),.5,a[4]).toArray()),r.push.apply(r,o.scale(o.add(l[0],l[2],a[3]),.5,a[4]).toArray())),n=e.length-3,u=n+1,h=n+2,t.push(n,u,h),t.push(i[0],n,h),t.push(n,i[1],u),t[p]=h,t[p+1]=u,t[p+2]=i[2]},u.getUniqueFaces=function(t,e){for(var r,i=e.length/3,n=[];i--;)for(var s=0;3>s;s++)r=e[3*i+s],n[r]?(t.push(t[3*r],t[3*r+1],t[3*r+2]),e[3*i+s]=t.length/3-1):n[r]=!0},u.subdivideSpheroid=function(t,e){for(var r,i,n,o,u,h=e.length/3;h--;)i=e.slice(3*h,3*h+3),r=i.map(function(e){return new s(t[3*e],t[3*e+1],t[3*e+2])}),t.push.apply(t,s.normalize(s.add(r[0],r[1],a[0]),a[1]).toArray()),t.push.apply(t,s.normalize(s.add(r[1],r[2],a[0]),a[1]).toArray()),t.push.apply(t,s.normalize(s.add(r[0],r[2],a[0]),a[1]).toArray()),n=t.length/3-3,o=n+1,u=n+2,e.push(n,o,u),e.push(i[0],n,u),e.push(n,i[1],o),e[3*h]=u,e[3*h+1]=o,e[3*h+2]=i[2]},u.getSpheroidNormals=function(t,e){e=e||[];for(var r,i=t.length/3,n=0;i>n;n++)r=new s(t[3*n+0],t[3*n+1],t[3*n+2]).normalize().toArray(),e[3*n+0]=r[0],e[3*n+1]=r[1],e[3*n+2]=r[2];return e},u.getSpheroidUV=function(t,e){e=e||[];for(var r,i=t.length/3,n=[],s=0;i>s;s++)r=a[0].set(t[3*s],t[3*s+1],t[3*s+2]).normalize().toArray(),n[0]=.5*this.getAzimuth(r)/Math.PI+.5,n[1]=this.getAltitude(r)/Math.PI+.5,e.push.apply(e,n);return e},u.normalizeAll=function(t,e){e=e||[];for(var r=t.length/3,i=0;r>i;i++)Array.prototype.push.apply(e,new s(t[3*i],t[3*i+1],t[3*i+2]).normalize().toArray());return e},u.normalizeVertices=function(t,e){e=e||[];var r,o,a,u,h,c,l,p,f=t.length/3,d=[];for(p=0;f>p;p++)l=d[p]=new s(t[3*p],t[3*p+1],t[3*p+2]),(null==r||l.x<r)&&(r=l.x),(null==o||l.x>o)&&(o=l.x),(null==a||l.y<a)&&(a=l.y),(null==u||l.y>u)&&(u=l.y),(null==h||l.z<h)&&(h=l.z),(null==c||l.z>c)&&(c=l.z);var m=new s(i(o,r),i(u,a),i(c,h)),_=Math.min(n(o+m.x,r+m.x),n(u+m.y,a+m.y),n(c+m.z,h+m.z));for(p=0;p<d.length;p++)e.push.apply(e,d[p].add(m).scale(_).toArray());return e},u.getAzimuth=function(t){return Math.atan2(t[2],-t[0])},u.getAltitude=function(t){return Math.atan2(-t[1],Math.sqrt(t[0]*t[0]+t[2]*t[2]))},u.trianglesToLines=function(t,e){var r=t.length/3;e=e||[];var i;for(i=0;r>i;i++)e.push(t[3*i+0],t[3*i+1]),e.push(t[3*i+1],t[3*i+2]),e.push(t[3*i+2],t[3*i+0]);return e},u.addBackfaceTriangles=function(t,e){for(var r=e.length/3,i=0,n=e.length;n--;)e[n]>i&&(i=e[n]);for(i++,n=0;r>n;n++){var s=e[3*n],o=e[3*n+1],a=e[3*n+2];e.push(s+i,a+i,o+i)}var u=t.length;for(n=0;u>n;n++)t.push(t[n])},e.exports=u},{"../math/Vec2":74,"../math/Vec3":75}],93:[function(t,e,r){"use strict";function i(t){
t=t||{};for(var e,r=t.detailX||t.detail||1,i=t.detailY||t.detail||1,o=[],a=[],u=[],h=[],c=0;i>=c;c++)for(var l=c/i,p=0;r>=p;p++){var f=p/r;o.push(2*(f-.5),2*(l-.5),0),a.push(f,1-l),r>p&&i>c&&(e=p+c*(r+1),h.push(e,e+1,e+r+1),h.push(e+r+1,e+1,e+r+2))}if(t.backface!==!1){s.addBackfaceTriangles(o,h);var d=a.length;for(e=0;d>e;e++)a.push(a[e])}return u=s.computeNormals(o,h),new n({buffers:[{name:"a_pos",data:o},{name:"a_texCoord",data:a,size:2},{name:"a_normals",data:u},{name:"indices",data:h,size:1}]})}var n=t("../Geometry"),s=t("../GeometryHelper");e.exports=i},{"../Geometry":91,"../GeometryHelper":92}],94:[function(t,e,r){"use strict";function i(t,e,r){this.buffer=null,this.target=t,this.type=e,this.data=[],this.gl=r}i.prototype.subData=function(){for(var t=this.gl,e=[],r=0,i=1e4;r<this.data.length;r+=i)e=Array.prototype.concat.apply(e,this.data.slice(r,r+i));this.buffer=this.buffer||t.createBuffer(),t.bindBuffer(this.target,this.buffer),t.bufferData(this.target,new this.type(e),t.STATIC_DRAW)},e.exports=i},{}],95:[function(t,e,r){"use strict";function i(t){this.gl=t,this.registry={},this._dynamicBuffers=[],this._staticBuffers=[],this._arrayBufferMax=3e4,this._elementBufferMax=3e4}var n="indices",s=t("./Buffer");i.prototype.allocate=function(t,e,r,i,o){var a,u,h,c,l=this.registry[t]||(this.registry[t]={keys:[],values:[],spacing:[],offset:[],length:[]}),p=l.keys.indexOf(e),f=e===n,d=!1,m=0;if(-1===p){if(p=l.keys.length,u=f?r.length:Math.floor(r.length/i),o)h=new s(f?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,f?Uint16Array:Float32Array,this.gl),this._dynamicBuffers.push({buffer:h,offset:r.length,isIndex:f});else{for(c=0;c<this._staticBuffers.length;c++)if(f===this._staticBuffers[c].isIndex&&(a=this._staticBuffers[c].offset+r.length,!f&&a<this._arrayBufferMax||f&&a<this._elementBufferMax)){h=this._staticBuffers[c].buffer,m=this._staticBuffers[c].offset,this._staticBuffers[c].offset+=r.length,d=!0;break}d||(h=new s(f?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,f?Uint16Array:Float32Array,this.gl),this._staticBuffers.push({buffer:h,offset:r.length,isIndex:f}))}l.keys.push(e),l.values.push(h),l.spacing.push(i),l.offset.push(m),l.length.push(u)}var _=r.length;for(c=0;_>c;c++)l.values[p].data[m+c]=r[c];l.values[p].subData()},e.exports=i},{"./Buffer":94}],96:[function(t,e,r){"use strict";function i(t,e){return function(){var r=t.apply(this,arguments);return e.apply(this,arguments),r}}function n(t,e){var r="body,html{background:#e3e3e3;font-family:monaco,monospace;font-size:14px;line-height:1.7em}#shaderReport{left:0;top:0;right:0;box-sizing:border-box;position:absolute;z-index:1000;color:#222;padding:15px;white-space:normal;list-style-type:none;margin:50px auto;max-width:1200px}#shaderReport li{background-color:#fff;margin:13px 0;box-shadow:0 1px 2px rgba(0,0,0,.15);padding:20px 30px;border-radius:2px;border-left:20px solid #e01111}span{color:#e01111;text-decoration:underline;font-weight:700}#shaderReport li p{padding:0;margin:0}#shaderReport li:nth-child(even){background-color:#f4f4f4}#shaderReport li p:first-child{margin-bottom:10px;color:#666}",i=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(i),i.textContent=r;var n=document.createElement("ul");n.setAttribute("id","shaderReport"),document.body.appendChild(n);for(var s,o=/ERROR: [\d]+:([\d]+): (.+)/gim,a=e.split("\n");null!=(s=o.exec(t));){s.index===o.lastIndex&&o.lastIndex++;var u=document.createElement("li"),h='<p><span>ERROR</span> "'+s[2]+'" in line '+s[1]+"</p>";h+="<p><b>"+a[s[1]-1].replace(/^[ \t]+/g,"")+"</b></p>",u.innerHTML=h,n.appendChild(u)}}e.exports=function(){return i(this.gl.compileShader,function(t){if(!this.getShaderParameter(t,this.COMPILE_STATUS)){var e=this.getShaderInfoLog(t),r=this.getShaderSource(t);n(e,r)}})}},{}],97:[function(t,e,r){"use strict";function i(t,e){this.gl=t,this.textureSlots=1,this.options=e||{},this.registeredMaterials={},this.flaggedUniforms=[],this.cachedUniforms={},this.uniformTypes=[],this.definitionVec4=[],this.definitionVec3=[],this.definitionFloat=[],this.applicationVec3=[],this.applicationVec4=[],this.applicationFloat=[],this.applicationVert=[],this.definitionVert=[],this.resetProgram()}var n=t("../utilities/clone"),s=t("../utilities/keyValueToArrays"),o=t("../webgl-shaders").vertex,a=t("../webgl-shaders").fragment,u=t("./Debug"),h=35633,c=35632,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p="precision mediump float;\n",f={undefined:"float ",1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 ",16:"mat4 "},d={u_baseColor:"vec4",u_normals:"vert",u_glossiness:"vec4",u_positionOffset:"vert"},m={vert:1,vec3:2,vec4:4,float:8},_=s({u_perspective:l,u_view:l,u_resolution:[0,0,0],u_transform:l,u_size:[1,1,1],u_time:0,u_opacity:1,u_metalness:0,u_glossiness:[0,0,0,0],u_baseColor:[1,1,1,1],u_normals:[1,1,1],u_positionOffset:[0,0,0],u_lightPosition:l,u_lightColor:l,u_ambientLight:[0,0,0],u_flatShading:0,u_numLights:0}),g=s({a_pos:[0,0,0],a_texCoord:[0,0],a_normals:[0,0,0]}),y=s({v_textureCoordinate:[0,0],v_normal:[0,0,0],v_position:[0,0,0],v_eyeVector:[0,0,0]});i.prototype.registerMaterial=function(t,e){var r=e,i=d[t],n=m[i];if((this.registeredMaterials[e._id]&n)===n)return this;var s;for(s in r.uniforms)-1===_.keys.indexOf(s)&&(_.keys.push(s),_.values.push(r.uniforms[s]));for(s in r.varyings)-1===y.keys.indexOf(s)&&(y.keys.push(s),y.values.push(r.varyings[s]));for(s in r.attributes)-1===g.keys.indexOf(s)&&(g.keys.push(s),g.values.push(r.attributes[s]));return this.registeredMaterials[e._id]|=n,"float"===i&&(this.definitionFloat.push(e.defines),this.definitionFloat.push("float fa_"+e._id+"() {\n "+r.glsl+" \n}"),this.applicationFloat.push("if (int(abs(ID)) == "+e._id+") return fa_"+e._id+"();")),"vec3"===i&&(this.definitionVec3.push(e.defines),this.definitionVec3.push("vec3 fa_"+e._id+"() {\n "+r.glsl+" \n}"),this.applicationVec3.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vec4"===i&&(this.definitionVec4.push(e.defines),this.definitionVec4.push("vec4 fa_"+e._id+"() {\n "+r.glsl+" \n}"),this.applicationVec4.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),"vert"===i&&(this.definitionVert.push(e.defines),this.definitionVert.push("vec3 fa_"+e._id+"() {\n "+r.glsl+" \n}"),this.applicationVert.push("if (int(abs(ID.x)) == "+e._id+") return fa_"+e._id+"();")),this.resetProgram()},i.prototype.resetProgram=function(){var t,e,r,i,s,u,l=[p],d=[p];for(this.uniformLocations=[],this.attributeLocations={},this.uniformTypes={},this.attributeNames=n(g.keys),this.attributeValues=n(g.values),this.varyingNames=n(y.keys),this.varyingValues=n(y.values),this.uniformNames=n(_.keys),this.uniformValues=n(_.values),this.flaggedUniforms=[],this.cachedUniforms={},d.push("uniform sampler2D u_textures[7];\n"),this.applicationVert.length&&l.push("uniform sampler2D u_textures[7];\n"),u=0;u<this.uniformNames.length;u++)i=this.uniformNames[u],s=this.uniformValues[u],l.push("uniform "+f[s.length]+i+";\n"),d.push("uniform "+f[s.length]+i+";\n");for(u=0;u<this.attributeNames.length;u++)i=this.attributeNames[u],s=this.attributeValues[u],l.push("attribute "+f[s.length]+i+";\n");for(u=0;u<this.varyingNames.length;u++)i=this.varyingNames[u],s=this.varyingValues[u],l.push("varying "+f[s.length]+i+";\n"),d.push("varying "+f[s.length]+i+";\n");e=l.join("")+o.replace("#vert_definitions",this.definitionVert.join("\n")).replace("#vert_applications",this.applicationVert.join("\n")),t=d.join("")+a.replace("#vec3_definitions",this.definitionVec3.join("\n")).replace("#vec3_applications",this.applicationVec3.join("\n")).replace("#vec4_definitions",this.definitionVec4.join("\n")).replace("#vec4_applications",this.applicationVec4.join("\n")).replace("#float_definitions",this.definitionFloat.join("\n")).replace("#float_applications",this.applicationFloat.join("\n")),r=this.gl.createProgram(),this.gl.attachShader(r,this.compileShader(this.gl.createShader(h),e)),this.gl.attachShader(r,this.compileShader(this.gl.createShader(c),t)),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.program=r,this.gl.useProgram(this.program)):(console.error("link error: "+this.gl.getProgramInfoLog(r)),this.program=null),this.setUniforms(this.uniformNames,this.uniformValues);var m=this.gl.getUniformLocation(this.program,"u_textures[0]");return this.gl.uniform1iv(m,[0,1,2,3,4,5,6]),this},i.prototype.uniformIsCached=function(t,e){if(null==this.cachedUniforms[t])return e.length?this.cachedUniforms[t]=new Float32Array(e):this.cachedUniforms[t]=e,!1;if(e.length){for(var r=e.length;r--;)if(e[r]!==this.cachedUniforms[t][r]){for(r=e.length;r--;)this.cachedUniforms[t][r]=e[r];return!1}}else if(this.cachedUniforms[t]!==e)return this.cachedUniforms[t]=e,!1;return!0},i.prototype.setUniforms=function(t,e){var r,i,n,s,o,a=this.gl;if(!this.program)return this;for(s=t.length,o=0;s>o;o++)if(n=t[o],i=e[o],r=this.uniformLocations[n],null!==r&&(void 0===r&&(r=a.getUniformLocation(this.program,n),this.uniformLocations[n]=r),!this.uniformIsCached(n,i)))switch(this.uniformTypes[n]||(this.uniformTypes[n]=this.getUniformTypeFromValue(i)),this.uniformTypes[n]){case"uniform4fv":a.uniform4fv(r,i);break;case"uniform3fv":a.uniform3fv(r,i);break;case"uniform2fv":a.uniform2fv(r,i);break;case"uniform1fv":a.uniform1fv(r,i);break;case"uniform1f":a.uniform1f(r,i);break;case"uniformMatrix3fv":a.uniformMatrix3fv(r,!1,i);break;case"uniformMatrix4fv":a.uniformMatrix4fv(r,!1,i)}return this},i.prototype.getUniformTypeFromValue=function(t){if(Array.isArray(t)||t instanceof Float32Array)switch(t.length){case 1:return"uniform1fv";case 2:return"uniform2fv";case 3:return"uniform3fv";case 4:return"uniform4fv";case 9:return"uniformMatrix3fv";case 16:return"uniformMatrix4fv"}else if(!isNaN(parseFloat(t))&&isFinite(t))return"uniform1f";throw'cant load uniform "'+name+'" with value:'+JSON.stringify(t)},i.prototype.compileShader=function(t,e){var r=1;return this.options.debug&&(this.gl.compileShader=u.call(this)),this.gl.shaderSource(t,e),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)||(console.error("compile error: "+this.gl.getShaderInfoLog(t)),console.error("1: "+e.replace(/\n/g,function(){return"\n"+(r+=1)+": "}))),t},e.exports=i},{"../utilities/clone":88,"../utilities/keyValueToArrays":89,"../webgl-shaders":104,"./Debug":96}],98:[function(t,e,r){"use strict";function i(t,e){e=e||{},this.id=t.createTexture(),this.width=e.width||0,this.height=e.height||0,this.mipmap=e.mipmap,this.format=e.format||"RGBA",this.type=e.type||"UNSIGNED_BYTE",this.gl=t,this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipYWebgl||!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlphaWebgl||!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e.magFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[e.minFilter]||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[e.wrapS]||t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[e.wrapT]||t.CLAMP_TO_EDGE)}i.prototype.bind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,this.id),this},i.prototype.unbind=function(){return this.gl.bindTexture(this.gl.TEXTURE_2D,null),this},i.prototype.setImage=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.gl[this.format],this.gl[this.type],t),this.mipmap&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this},i.prototype.setArray=function(t){return this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl[this.format],this.width,this.height,0,this.gl[this.format],this.gl[this.type],t),this},i.prototype.readBack=function(t,e,r,i){var n,s=this.gl;t=t||0,e=e||0,r=r||this.width,i=i||this.height;var o=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,o),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.id,0),s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE&&(n=new Uint8Array(r*i*4),s.readPixels(t,e,r,i,s.RGBA,s.UNSIGNED_BYTE,n)),n},e.exports=i},{}],99:[function(t,e,r){"use strict";function i(t){this.registry=[],this._needsResample=[],this._activeTexture=0,this._boundTexture=null,this._checkerboard=o(),this.gl=t}function n(t,e){var r=("string"==typeof t?new Image:t)||{};return r.crossOrigin="anonymous",r.src||(r.src=t),r.complete?e(r):r.onload=function(){e(r)},r}var s=t("./Texture"),o=t("./createCheckerboard");i.prototype.update=function(t){for(var e=this.registry.length,r=1;e>r;r++){var i=this.registry[r];i&&i.isLoaded&&i.resampleRate&&(!i.lastResample||t-i.lastResample>i.resampleRate)&&(this._needsResample[i.id]||(this._needsResample[i.id]=!0,i.lastResample=t))}},i.prototype.register=function(t,e){var r,i=this,o=t.data,a=t.id,u=t.options||{},h=this.registry[a];return h||(h=new s(this.gl,u),h.setImage(this._checkerboard),r=this.registry[a]={resampleRate:u.resampleRate||null,lastResample:null,isLoaded:!1,texture:h,source:o,id:a,slot:e},Array.isArray(o)||o instanceof Uint8Array||o instanceof Float32Array?(this.bindTexture(a),h.setArray(o),r.isLoaded=!0):window&&o instanceof window.HTMLVideoElement?o.addEventListener("loadeddata",function(){i.bindTexture(a),h.setImage(o),r.isLoaded=!0,r.source=o}):"string"==typeof o&&n(o,function(t){i.bindTexture(a),h.setImage(t),r.isLoaded=!0,r.source=t})),a},i.prototype.bindTexture=function(t){var e=this.registry[t];this._activeTexture!==e.slot&&(this.gl.activeTexture(this.gl.TEXTURE0+e.slot),this._activeTexture=e.slot),this._boundTexture!==t&&(this._boundTexture=t,e.texture.bind()),this._needsResample[e.id]&&(e.texture.setImage(e.source),this._needsResample[e.id]=!1)},e.exports=i},{"./Texture":98,"./createCheckerboard":102}],100:[function(t,e,r){"use strict";function i(t,e){t.classList.add("famous-webgl-renderer"),this.canvas=t,this.compositor=e;var r=this.gl=this.getWebGLContext(this.canvas);r.clearColor(0,0,0,0),r.polygonOffset(.1,.1),r.enable(r.POLYGON_OFFSET_FILL),r.enable(r.DEPTH_TEST),r.enable(r.BLEND),r.depthFunc(r.LEQUAL),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.CULL_FACE),r.cullFace(r.BACK),this.meshRegistry={},this.meshRegistryKeys=[],this.cutoutRegistry={},this.cutoutRegistryKeys=[],this.numLights=0,this.ambientLightColor=[0,0,0],this.lightRegistry={},this.lightRegistryKeys=[],this.lightPositions=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lightColors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.textureManager=new h(r),this.texCache={},this.bufferRegistry=new s(r),this.program=new n(r,{debug:!0}),this.state={boundArrayBuffer:null,boundElementBuffer:null,lastDrawn:null,enabledAttributes:{},enabledAttributesKeys:[]},this.resolutionName=["u_resolution"],this.resolutionValues=[],this.cachedSize=[],this.projectionTransform=[1,0,0,0,0,1,0,0,0,0,-1e-6,0,-1,1,0,1];var i=this.cutoutGeometry=new o;this.bufferRegistry.allocate(i.spec.id,"a_pos",i.spec.bufferValues[0],3),this.bufferRegistry.allocate(i.spec.id,"a_texCoord",i.spec.bufferValues[1],2),this.bufferRegistry.allocate(i.spec.id,"a_normals",i.spec.bufferValues[2],3),this.bufferRegistry.allocate(i.spec.id,"indices",i.spec.bufferValues[3],1)}var n=t("./Program"),s=t("./BufferRegistry"),o=t("../webgl-geometries/primitives/Plane"),a=t("./radixSort"),u=t("../utilities/keyValueToArrays"),h=t("./TextureManager"),c=t("./compileMaterial"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=u({u_numLights:0,u_ambientLight:new Array(3),u_lightPosition:new Array(3),u_lightColor:new Array(3),u_perspective:new Array(16),u_time:0,u_view:new Array(16)});i.prototype.getWebGLContext=function(t){for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null,i=0;i<e.length;i++){try{r=t.getContext(e[i])}catch(t){var n="Error creating WebGL context: "+t.prototype.toString();console.error(n)}if(r)break}return r?r:!1},i.prototype.createLight=function(t){return this.numLights++,this.lightRegistryKeys.push(t),this.lightRegistry[t]={color:[0,0,0],position:[0,0,0]},this.lightRegistry[t]},i.prototype.createMesh=function(t){this.meshRegistryKeys.push(t);var e=u({u_opacity:1,u_transform:l,u_size:[0,0,0],u_baseColor:[.5,.5,.5,1],u_positionOffset:[0,0,0],u_normals:[0,0,0],u_flatShading:0,u_glossiness:[0,0,0,0]});return this.meshRegistry[t]={depth:null,uniformKeys:e.keys,uniformValues:e.values,buffers:{},geometry:null,drawType:null,textures:[],visible:!0},this.meshRegistry[t]},i.prototype.setCutoutState=function(t,e){var r=this.getOrSetCutout(t);r.visible=e},i.prototype.getOrSetCutout=function(t){if(this.cutoutRegistry[t])return this.cutoutRegistry[t];var e=u({u_opacity:0,u_transform:l.slice(),u_size:[0,0,0],u_origin:[0,0,0],u_baseColor:[0,0,0,1]});return this.cutoutRegistryKeys.push(t),this.cutoutRegistry[t]={uniformKeys:e.keys,uniformValues:e.values,geometry:this.cutoutGeometry.spec.id,drawType:this.cutoutGeometry.spec.type,visible:!0},this.cutoutRegistry[t]},i.prototype.setMeshVisibility=function(t,e){var r=this.meshRegistry[t]||this.createMesh(t);r.visible=e},i.prototype.removeMesh=function(t){var e=this.meshRegistryKeys.indexOf(t);this.meshRegistryKeys.splice(e,1),this.meshRegistry[t]=null},i.prototype.setCutoutUniform=function(t,e,r){var i=this.getOrSetCutout(t),n=i.uniformKeys.indexOf(e);if(Array.isArray(r))for(var s=0,o=r.length;o>s;s++)i.uniformValues[n][s]=r[s];else i.uniformValues[n]=r},i.prototype.setMeshOptions=function(t,e){var r=this.meshRegistry[t]||this.createMesh(t);return r.options=e,this},i.prototype.setAmbientLightColor=function(t,e,r,i){return this.ambientLightColor[0]=e,this.ambientLightColor[1]=r,this.ambientLightColor[2]=i,this},i.prototype.setLightPosition=function(t,e,r,i){var n=this.lightRegistry[t]||this.createLight(t);return n.position[0]=e,n.position[1]=r,n.position[2]=i,this},i.prototype.setLightColor=function(t,e,r,i){var n=this.lightRegistry[t]||this.createLight(t);return n.color[0]=e,n.color[1]=r,n.color[2]=i,this},i.prototype.handleMaterialInput=function(t,e,r){var i=this.meshRegistry[t]||this.createMesh(t);r=c(r,i.textures.length),i.uniformValues[i.uniformKeys.indexOf(e)][0]=-r._id;for(var n=r.textures.length;n--;)i.textures.push(this.textureManager.register(r.textures[n],i.textures.length+n));return this.program.registerMaterial(e,r),this.updateSize()},i.prototype.setGeometry=function(t,e,r,i){var n=this.meshRegistry[t]||this.createMesh(t);return n.geometry=e,n.drawType=r,n.dynamic=i,this},i.prototype.setMeshUniform=function(t,e,r){var i=this.meshRegistry[t]||this.createMesh(t),n=i.uniformKeys.indexOf(e);-1===n?(i.uniformKeys.push(e),i.uniformValues.push(r)):i.uniformValues[n]=r},i.prototype.bufferData=function(t,e,r,i,n,s){return this.bufferRegistry.allocate(e,r,i,n,s),this},i.prototype.draw=function(t){var e=this.compositor.getTime();this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.textureManager.update(e),this.meshRegistryKeys=a(this.meshRegistryKeys,this.meshRegistry),this.setGlobalUniforms(t),this.drawCutouts(),this.drawMeshes()},i.prototype.drawMeshes=function(){for(var t,e,r=this.gl,i=0;i<this.meshRegistryKeys.length;i++)if(e=this.meshRegistry[this.meshRegistryKeys[i]],t=this.bufferRegistry.registry[e.geometry],e.visible&&(e.uniformValues[0]<1?(r.depthMask(!1),r.enable(r.BLEND)):(r.depthMask(!0),r.disable(r.BLEND)),t)){for(var n=e.textures.length;n--;)this.textureManager.bindTexture(e.textures[n]);e.options&&this.handleOptions(e.options,e),this.program.setUniforms(e.uniformKeys,e.uniformValues),this.drawBuffers(t,e.drawType,e.geometry),e.options&&this.resetOptions(e.options)}},i.prototype.drawCutouts=function(){var t,e,r=this.cutoutRegistryKeys.length;r&&(this.gl.enable(this.gl.BLEND),this.gl.depthMask(!0));for(var i=0;r>i;i++)t=this.cutoutRegistry[this.cutoutRegistryKeys[i]],e=this.bufferRegistry.registry[t.geometry],t.visible&&(this.program.setUniforms(t.uniformKeys,t.uniformValues),this.drawBuffers(e,t.drawType,t.geometry))},i.prototype.setGlobalUniforms=function(t){for(var e,r,i=0,n=this.lightRegistryKeys.length;n>i;i++)e=this.lightRegistry[this.lightRegistryKeys[i]],r=4*i,this.lightPositions[0+r]=e.position[0],this.lightPositions[1+r]=e.position[1],this.lightPositions[2+r]=e.position[2],this.lightColors[0+r]=e.color[0],this.lightColors[1+r]=e.color[1],this.lightColors[2+r]=e.color[2];p.values[0]=this.numLights,p.values[1]=this.ambientLightColor,p.values[2]=this.lightPositions,p.values[3]=this.lightColors,this.projectionTransform[0]=1/(.5*this.cachedSize[0]),this.projectionTransform[5]=-1/(.5*this.cachedSize[1]),this.projectionTransform[11]=t.perspectiveTransform[11],p.values[4]=this.projectionTransform,p.values[5]=.001*this.compositor.getTime(),p.values[6]=t.viewTransform,this.program.setUniforms(p.keys,p.values)},i.prototype.drawBuffers=function(t,e,r){var i,n,s,o,a,u,h,c,l=this.gl,p=0;for(u=t.keys.length,c=0;u>c;c++)i=t.keys[c],"indices"!==i?(n=this.program.attributeLocations[i],-1!==n&&(void 0!==n||(n=l.getAttribLocation(this.program.program,i),this.program.attributeLocations[i]=n,-1!==n))&&(this.state.enabledAttributes[i]||(l.enableVertexAttribArray(n),this.state.enabledAttributes[i]=!0,this.state.enabledAttributesKeys.push(i)),a=t.values[c],s=t.spacing[c],o=t.offset[c],p=t.length[c],this.state.boundArrayBuffer!==a&&(l.bindBuffer(a.target,a.buffer),this.state.boundArrayBuffer=a),this.state.lastDrawn!==r&&l.vertexAttribPointer(n,s,l.FLOAT,l.FALSE,0,4*o))):h=c;var f=this.state.enabledAttributesKeys.length;for(c=0;f>c;c++){var d=this.state.enabledAttributesKeys[c];this.state.enabledAttributes[d]&&-1===t.keys.indexOf(d)&&(l.disableVertexAttribArray(this.program.attributeLocations[d]),this.state.enabledAttributes[d]=!1)}p&&(void 0!==h?(a=t.values[h],o=t.offset[h],s=t.spacing[h],p=t.length[h],this.state.boundElementBuffer!==a&&(l.bindBuffer(a.target,a.buffer),this.state.boundElementBuffer=a),l.drawElements(l[e],p,l.UNSIGNED_SHORT,2*o)):l.drawArrays(l[e],0,p)),this.state.lastDrawn=r},i.prototype.updateSize=function(t){if(t){var e=window.devicePixelRatio||1,r=~~(t[0]*e),i=~~(t[1]*e);this.canvas.width=r,this.canvas.height=i,this.gl.viewport(0,0,r,i),this.cachedSize[0]=t[0],this.cachedSize[1]=t[1],this.cachedSize[2]=t[0]>t[1]?t[0]:t[1],this.resolutionValues[0]=this.cachedSize}return this.program.setUniforms(this.resolutionName,this.resolutionValues),this},i.prototype.handleOptions=function(t,e){var r=this.gl;t&&("double"===t.side&&(this.gl.cullFace(this.gl.FRONT),this.drawBuffers(this.bufferRegistry.registry[e.geometry],e.drawType,e.geometry),this.gl.cullFace(this.gl.BACK)),t.blending&&r.blendFunc(r.SRC_ALPHA,r.ONE),"back"===t.side&&r.cullFace(r.FRONT))},i.prototype.resetOptions=function(t){var e=this.gl;t&&(t.blending&&e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),"back"===t.side&&e.cullFace(e.BACK))},e.exports=i},{"../utilities/keyValueToArrays":89,"../webgl-geometries/primitives/Plane":93,"./BufferRegistry":95,"./Program":97,"./TextureManager":99,"./compileMaterial":101,"./radixSort":103}],101:[function(t,e,r){"use strict";function i(t,e){var r="",i={},h={},l={},p=[],f=[];return n(t,function(t,n){if(t.chunk){var d=c[s(t)],m=a(t),_=o(t.chunk.glsl,t.inputs,f.length+e);r+=d+m+" = "+_+"\n ",t.uniforms&&u(i,t.uniforms),t.varyings&&u(h,t.varyings),t.attributes&&u(l,t.attributes),t.chunk.defines&&p.push(t.chunk.defines),t.texture&&f.push(t.texture)}}),{_id:t._id,glsl:r+"return "+a(t)+";",defines:p.join("\n"),uniforms:i,varyings:h,attributes:l,textures:f}}function n(t,e){for(var r=t.inputs,i=r&&r.length,s=-1;++s<i;)n(r[s],e);return e(t),t}function s(t){if("number"==typeof t)return 1;if(Array.isArray(t))return t.length;var e=t.chunk.output;if("number"==typeof e)return e;var r=t.inputs.map(function(t){return s(t)}).join(",");return e[r]}function o(t,e,r){return t.replace(/%\d/g,function(t){return a(e[t[1]-1])}).replace(/\$TEXTURE/,"u_textures["+r+"]")}function a(t){return Array.isArray(t)?h(t):"object"==typeof t?"fa_"+t._id:t.toFixed(6)}function u(t,e){for(var r in e)t[r]=e[r]}function h(t){var e=t.length;return"vec"+e+"("+t.join(",")+")"}var c={1:"float ",2:"vec2 ",3:"vec3 ",4:"vec4 "};e.exports=i},{}],102:[function(t,e,r){"use strict";function i(){var t=document.createElement("canvas").getContext("2d");t.canvas.width=t.canvas.height=128;for(var e=0;e<t.canvas.height;e+=16)for(var r=0;r<t.canvas.width;r+=16)t.fillStyle=16&(r^e)?"#FFF":"#DDD",t.fillRect(r,e,16,16);return t.canvas}e.exports=i},{}],103:[function(t,e,r){"use strict";function i(t,e,r){var i=t[r],n=e[i];return(n.depth?n.depth:e[i].uniformValues[1][14])+g}function n(t,e,r,i){var n=t[r];return e[n].depth=a(i)-g,n}function s(t,e,r){e[t[r]].depth=null}function o(t){return v[0]=t,b[0]}function a(t){return b[0]=t,v[0]}function u(t,e){var r,a,u,f,g,y,v,b,w,x,E,T=0,S=[];for(m=32/h+.999999999999999|0,r=0,f=c*m;f>r;r++)p[r]=0;for(r=0,f=t.length;f>r;r++){for(g=o(i(t,e,r)),g^=g>>31|2147483648,a=0,u=0;_>a;a+=c,u+=h)p[a+(g>>>u&l)]++;p[a+(g>>>u&d)]++}for(a=0;_>=a;a+=c)for(b=a,w=0;a+c>b;b++)x=p[b]+w,p[b]=w-1,w=x;if(--m){for(r=0,f=t.length;f>r;r++)g=o(i(t,e,r)),S[++p[g&l]]=n(t,e,r,g^=g>>31|2147483648);for(v=S,S=t,t=v;++T<m;){for(r=0,f=t.length,y=T*c,E=T*h;f>r;r++)g=o(i(t,e,r)),S[++p[y+(g>>>E&l)]]=t[r];v=S,S=t,t=v}}for(r=0,f=t.length,y=T*c,E=T*h;f>r;r++)g=o(i(t,e,r)),S[++p[y+(g>>>E&d)]]=n(t,e,r,g^(~g>>31|2147483648)),s(t,e,r);return S}var h=11,c=1<<h,l=c-1,p=new Array(c*Math.ceil(64/h)),f=1<<31%h,d=(f<<1)-1,m=32/h+.999999999999999|0,_=c*(m-1),g=Math.pow(20,6),y=new ArrayBuffer(4),v=new Float32Array(y,0,1),b=new Int32Array(y,0,1);e.exports=u},{}],104:[function(t,e,r){"use strict";var i=(t("glslify"),t("glslify/simple-adapter.js")("\n#define GLSLIFY 1\n\nmat3 a_x_getNormalMatrix(in mat4 t) {\n  mat3 matNorm;\n  mat4 a = t;\n  float a00 = a[0][0], a01 = a[0][1], a02 = a[0][2], a03 = a[0][3], a10 = a[1][0], a11 = a[1][1], a12 = a[1][2], a13 = a[1][3], a20 = a[2][0], a21 = a[2][1], a22 = a[2][2], a23 = a[2][3], a30 = a[3][0], a31 = a[3][1], a32 = a[3][2], a33 = a[3][3], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32, det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  det = 1.0 / det;\n  matNorm[0][0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  matNorm[0][1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  matNorm[0][2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  matNorm[1][0] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  matNorm[1][1] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  matNorm[1][2] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  matNorm[2][0] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  matNorm[2][1] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  matNorm[2][2] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return matNorm;\n}\nfloat b_x_inverse(float m) {\n  return 1.0 / m;\n}\nmat2 b_x_inverse(mat2 m) {\n  return mat2(m[1][1], -m[0][1], -m[1][0], m[0][0]) / (m[0][0] * m[1][1] - m[0][1] * m[1][0]);\n}\nmat3 b_x_inverse(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11), b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10), b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\nmat4 b_x_inverse(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3], a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3], a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3], a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3], b00 = a00 * a11 - a01 * a10, b01 = a00 * a12 - a02 * a10, b02 = a00 * a13 - a03 * a10, b03 = a01 * a12 - a02 * a11, b04 = a01 * a13 - a03 * a11, b05 = a02 * a13 - a03 * a12, b06 = a20 * a31 - a21 * a30, b07 = a20 * a32 - a22 * a30, b08 = a20 * a33 - a23 * a30, b09 = a21 * a32 - a22 * a31, b10 = a21 * a33 - a23 * a31, b11 = a22 * a33 - a23 * a32, det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  return mat4(a11 * b11 - a12 * b10 + a13 * b09, a02 * b10 - a01 * b11 - a03 * b09, a31 * b05 - a32 * b04 + a33 * b03, a22 * b04 - a21 * b05 - a23 * b03, a12 * b08 - a10 * b11 - a13 * b07, a00 * b11 - a02 * b08 + a03 * b07, a32 * b02 - a30 * b05 - a33 * b01, a20 * b05 - a22 * b02 + a23 * b01, a10 * b10 - a11 * b08 + a13 * b06, a01 * b08 - a00 * b10 - a03 * b06, a30 * b04 - a31 * b02 + a33 * b00, a21 * b02 - a20 * b04 - a23 * b00, a11 * b07 - a10 * b09 - a12 * b06, a00 * b09 - a01 * b07 + a02 * b06, a31 * b01 - a30 * b03 - a32 * b00, a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\nfloat c_x_transpose(float m) {\n  return m;\n}\nmat2 c_x_transpose(mat2 m) {\n  return mat2(m[0][0], m[1][0], m[0][1], m[1][1]);\n}\nmat3 c_x_transpose(mat3 m) {\n  return mat3(m[0][0], m[1][0], m[2][0], m[0][1], m[1][1], m[2][1], m[0][2], m[1][2], m[2][2]);\n}\nmat4 c_x_transpose(mat4 m) {\n  return mat4(m[0][0], m[1][0], m[2][0], m[3][0], m[0][1], m[1][1], m[2][1], m[3][1], m[0][2], m[1][2], m[2][2], m[3][2], m[0][3], m[1][3], m[2][3], m[3][3]);\n}\nvec4 applyTransform(vec4 pos) {\n  mat4 MVMatrix = u_view * u_transform;\n  pos.x += 1.0;\n  pos.y -= 1.0;\n  pos.xyz *= u_size * 0.5;\n  pos.y *= -1.0;\n  v_position = (MVMatrix * pos).xyz;\n  v_eyeVector = (u_resolution * 0.5) - v_position;\n  pos = u_perspective * MVMatrix * pos;\n  return pos;\n}\n#vert_definitions\n\nvec3 calculateOffset(vec3 ID) {\n  \n  #vert_applications\n  return vec3(0.0);\n}\nvoid main() {\n  v_textureCoordinate = a_texCoord;\n  vec3 invertedNormals = a_normals + (u_normals.x < 0.0 ? calculateOffset(u_normals) * 2.0 - 1.0 : vec3(0.0));\n  invertedNormals.y *= -1.0;\n  v_normal = c_x_transpose(mat3(b_x_inverse(u_transform))) * invertedNormals;\n  vec3 offsetPos = a_pos + calculateOffset(u_positionOffset);\n  gl_Position = applyTransform(vec4(offsetPos, 1.0));\n}","\n#define GLSLIFY 1\n\n#float_definitions\n\nfloat a_x_applyMaterial(float ID) {\n  \n  #float_applications\n  return 1.;\n}\n#vec3_definitions\n\nvec3 a_x_applyMaterial(vec3 ID) {\n  \n  #vec3_applications\n  return vec3(0);\n}\n#vec4_definitions\n\nvec4 a_x_applyMaterial(vec4 ID) {\n  \n  #vec4_applications\n  return vec4(0);\n}\nvec4 b_x_applyLight(in vec4 baseColor, in vec3 normal, in vec4 glossiness) {\n  int numLights = int(u_numLights);\n  vec3 ambientColor = u_ambientLight * baseColor.rgb;\n  vec3 eyeVector = normalize(v_eyeVector);\n  vec3 diffuse = vec3(0.0);\n  bool hasGlossiness = glossiness.a > 0.0;\n  bool hasSpecularColor = length(glossiness.rgb) > 0.0;\n  for(int i = 0; i < 4; i++) {\n    if(i >= numLights)\n      break;\n    vec3 lightDirection = normalize(u_lightPosition[i].xyz - v_position);\n    float lambertian = max(dot(lightDirection, normal), 0.0);\n    if(lambertian > 0.0) {\n      diffuse += u_lightColor[i].rgb * baseColor.rgb * lambertian;\n      if(hasGlossiness) {\n        vec3 halfVector = normalize(lightDirection + eyeVector);\n        float specularWeight = pow(max(dot(halfVector, normal), 0.0), glossiness.a);\n        vec3 specularColor = hasSpecularColor ? glossiness.rgb : u_lightColor[i].rgb;\n        diffuse += specularColor * specularWeight * lambertian;\n      }\n    }\n  }\n  return vec4(ambientColor + diffuse, baseColor.a);\n}\nvoid main() {\n  vec4 material = u_baseColor.r >= 0.0 ? u_baseColor : a_x_applyMaterial(u_baseColor);\n  bool lightsEnabled = (u_flatShading == 0.0) && (u_numLights > 0.0 || length(u_ambientLight) > 0.0);\n  vec3 normal = normalize(v_normal);\n  vec4 glossiness = u_glossiness.x < 0.0 ? a_x_applyMaterial(u_glossiness) : u_glossiness;\n  vec4 color = lightsEnabled ? b_x_applyLight(material, normalize(v_normal), glossiness) : material;\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n}",[],[]));e.exports=i},{glslify:76,"glslify/simple-adapter.js":77}],105:[function(t,e,r){"use strict";function i(){return Math.floor(y.default().w/b.default.targetThumbnailWidth);
}function n(){return Math.ceil(b.default.numberOfThumbnails/i())}function s(){var t=y.default().w/i(),e=t*b.default.thumbnailAspectRatio;return{w:t,h:e}}function o(){var t=s(),e=i()*t.w,r=n()*t.h;return{w:e,h:r}}function a(t){var e=i(),r=t%e,n=Math.floor(t/e);return{row:n,col:r}}function u(t){var e=a(t),r=e.row;return r}function h(t){var e=a(t),r=e.column;return r}function c(t){var e=a(t),r=s(),i=e.col*r.w,n=e.row*r.h;return{x:i,y:n}}function l(t){return u(t)%2!==0}function p(t){return!l(t)}function f(t){return h(t)%2!==0}function d(t){return!f(t)}var m=t("babel-runtime/core-js/object/define-property").default,_=t("babel-runtime/helpers/interop-require-default").default;m(r,"__esModule",{value:!0});var g=t("./getViewportSize"),y=_(g),v=t("./settings"),b=_(v);r.default={isOddRow:l,isOddColumn:f,isEvenRow:p,isEvenColumn:d,getColumn:h,getColumns:i,getRow:u,getRows:n,getThumbnailSize:s,getGridCoords:a,getPixelCoords:c,getGallerySize:o},e.exports=r.default},{"./getViewportSize":113,"./settings":122,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/interop-require-default":10}],106:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/create-class").default,n=t("babel-runtime/helpers/class-call-check").default,s=t("babel-runtime/core-js/object/define-property").default,o=t("babel-runtime/core-js/symbol").default,a=t("babel-runtime/helpers/interop-require-default").default;s(r,"__esModule",{value:!0});var u=t("famous/transitions/Transitionable"),h=a(u),c=t("../getCoords"),l=a(c),p=o("custom curve"),f=function(){function t(e){var r=void 0===arguments[1]?{x:0,y:0}:arguments[1],i=void 0===arguments[2]?2e3:arguments[2],s=void 0===arguments[3]?t[p]:arguments[3];n(this,t),this.targetCoords=r,this.duration=i,this.startCoords=l.default(e),this.node=e,this.id=e.addComponent(this),this.curve=s}return i(t,[{key:"start",value:function(){this.node.requestUpdate(this.id),this.transition={y:new h.default(this.startCoords.y).to(this.targetCoords.y,this.curve,this.duration),x:new h.default(this.startCoords.x).to(this.targetCoords.x,this.curve,this.duration)}}},{key:"onUpdate",value:function(){return this.node.setPosition(this.transition.x.get(),this.transition.y.get()),this.transition.x.isActive()||this.transition.y.isActive()?void this.node.requestUpdate(this.id):void this.node.removeComponent(this)}}],[{key:"addTo",value:function(e,r,i,n){return new t(e,r,i,n)}},{key:p,value:function(t){var e=.3,r=1,i=e/(1.1*Math.PI)*Math.asin(1/r);return 0===t?0:1===t?1:r*Math.pow(5,-10*t)*Math.sin((t-i)*Math.PI/e)+1}}]),t}();r.default=f,e.exports=r.default},{"../getCoords":111,"babel-runtime/core-js/object/define-property":2,"babel-runtime/core-js/symbol":5,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/interop-require-default":10,"famous/transitions/Transitionable":86}],107:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/create-class").default,n=t("babel-runtime/helpers/class-call-check").default,s=t("babel-runtime/core-js/object/define-property").default;s(r,"__esModule",{value:!0});var o=function(){function t(e,r){n(this,t),this.node=e,this.id=e.addComponent(this),this.updatef=r}return i(t,[{key:"onReceive",value:function(t,e){var r=e.w,i=e.h;"VIEWPORT_RESIZE"===t&&this.updatef(r,i)}}],[{key:"addTo",value:function(e,r){return new t(e,r)}}]),t}();r.default=o,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7}],108:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/create-class").default,n=t("babel-runtime/helpers/class-call-check").default,s=t("babel-runtime/core-js/object/define-property").default,o=t("babel-runtime/helpers/interop-require-default").default;s(r,"__esModule",{value:!0});var a=t("famous/transitions/Transitionable"),u=o(a),h=t("../getSize"),c=o(h),l=function(){function t(e){var r=void 0===arguments[1]?{w:120,y:80}:arguments[1],i=void 0===arguments[2]?100:arguments[2];n(this,t),this.targetSize=r,this.duration=i,this.startSize=c.default(e),this.node=e,this.id=e.addComponent(this)}return i(t,[{key:"start",value:function(){this.node.requestUpdate(this.id),this.transition={w:new u.default(this.startSize.w).to(this.targetSize.w,"easeOut",this.duration),h:new u.default(this.startSize.h).to(this.targetSize.h,"easeOut",this.duration)}}},{key:"onUpdate",value:function(){return this.node.setAbsoluteSize(this.transition.w.get(),this.transition.h.get()),this.transition.w.isActive()||this.transition.h.isActive()?void this.node.requestUpdate(this.id):void this.node.removeComponent(this)}}],[{key:"addTo",value:function(e,r,i){return new t(e,r,i)}}]),t}();r.default=l,e.exports=r.default},{"../getSize":112,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/interop-require-default":10,"famous/transitions/Transitionable":86}],109:[function(t,e,r){"use strict";function i(t,e){return new a.default(t,e)}var n=t("babel-runtime/core-js/object/define-property").default,s=t("babel-runtime/helpers/interop-require-default").default;n(r,"__esModule",{value:!0});var o=t("famous/dom-renderables/DOMElement"),a=s(o);r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/interop-require-default":10,"famous/dom-renderables/DOMElement":60}],110:[function(t,e,r){"use strict";function i(t,e){return function(){for(var r=arguments.length,i=Array(r),n=0;r>n;n++)i[n]=arguments[n];return window.setTimeout(function(){return e.apply(null,i)},t)}}var n=t("babel-runtime/core-js/object/define-property").default;n(r,"__esModule",{value:!0}),r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2}],111:[function(t,e,r){"use strict";function i(t){var e=t.getPosition();return{x:e[0],y:e[1]}}var n=t("babel-runtime/core-js/object/define-property").default;n(r,"__esModule",{value:!0}),r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2}],112:[function(t,e,r){"use strict";function i(t){var e=t.getSize();return{w:e[0],h:e[1]}}var n=t("babel-runtime/core-js/object/define-property").default;n(r,"__esModule",{value:!0}),r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2}],113:[function(t,e,r){"use strict";function i(){if("undefined"==typeof document.documentElement.clientWidth)throw new Error("unsupported browser");return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}var n=t("babel-runtime/core-js/object/define-property").default;n(r,"__esModule",{value:!0}),r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2}],114:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/interop-require-default").default,n=t("./nodes/ScrollBox"),s=i(n),o=t("./nodes/Thumbnail"),a=i(o),u=t("./nodes/Logo"),h=i(u),c=t("./delay"),l=i(c),p=t("./scene"),f=i(p),d=t("./settings"),m=i(d),_=t("./onResize"),g=i(_),y=t("./getViewportSize"),v=i(y),b=s.default.add(f.default);h.default.add(f.default);for(var w=0;w<m.default.numberOfThumbnails;w++)l.default(30*w+100*Math.random(),a.default.add)(b.node,w);g.default(function(){var t=v.default(),e=t.w,r=t.h;f.default.onReceive("CONTEXT_RESIZE",[e,r]),f.default.getDispatch().dispatch("VIEWPORT_RESIZE",{w:e,h:r})})},{"./delay":110,"./getViewportSize":113,"./nodes/Logo":117,"./nodes/ScrollBox":118,"./nodes/Thumbnail":119,"./onResize":120,"./scene":121,"./settings":122,"babel-runtime/helpers/interop-require-default":10}],115:[function(t,e,r){"use strict";function i(t){return new s(function(e,r){var i=new Image;i.onload=e,i.onabort=r,i.onerror=r,i.src=t})}var n=t("babel-runtime/core-js/object/define-property").default,s=t("babel-runtime/core-js/promise").default;n(r,"__esModule",{value:!0}),r.default=i,e.exports=r.default},{"babel-runtime/core-js/object/define-property":2,"babel-runtime/core-js/promise":4}],116:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/class-call-check").default,n=t("babel-runtime/core-js/object/define-property").default,s=t("babel-runtime/helpers/interop-require-default").default;n(r,"__esModule",{value:!0});var o=t("../createDOMElement"),a=s(o),u=function t(e,r,n,s){var o=n.w,u=void 0===o?100:o,h=n.h,c=void 0===h?100:h,l=s.x,p=void 0===l?0:l,f=s.y,d=void 0===f?0:f,m=s.z,_=void 0===m?0:m;i(this,t),this.node=e.addChild(),a.default(this.node,{tagName:"img"}).setAttribute("src",r),this.node.setSizeMode("absolute","absolute","absolute").setAbsoluteSize(u,c).setPosition(p,d,_)};r.default=u,e.exports=r.default},{"../createDOMElement":109,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/interop-require-default":10}],117:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/inherits").default,n=t("babel-runtime/helpers/get").default,s=t("babel-runtime/helpers/create-class").default,o=t("babel-runtime/helpers/class-call-check").default,a=t("babel-runtime/core-js/object/define-property").default,u=t("babel-runtime/helpers/interop-require-default").default;a(r,"__esModule",{value:!0});var h=t("../loadImage"),c=u(h),l=t("./Image"),p=u(l),f="./images/mobilede-logo.svg",d={w:182,h:57},m={x:10,y:10,z:10},_=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,f,d,m)}return i(e,t),s(e,null,[{key:"add",value:function(t){return c.default(f).then(function(){return new e(t)}).catch(function(t){throw new Error("Error adding logo "+f+": "+t.message)})}}]),e}(p.default);r.default=_,e.exports=r.default},{"../loadImage":115,"./Image":116,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/get":8,"babel-runtime/helpers/inherits":9,"babel-runtime/helpers/interop-require-default":10}],118:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/create-class").default,n=t("babel-runtime/helpers/class-call-check").default,s=t("babel-runtime/core-js/object/define-property").default,o=t("babel-runtime/helpers/interop-require-default").default;s(r,"__esModule",{value:!0});var a=t("../createDOMElement"),u=o(a),h=t("../getViewportSize"),c=o(h),l=t("../components/ResizeListener"),p=o(l),f=function(){function t(e){var r=this;n(this,t);var i=c.default(),s=i.w,o=i.h,a=void 0;this.node=e.addChild(),a=u.default(this.node),this.node.setSizeMode("absolute","absolute","absolute").setAbsoluteSize(s,o).setPosition(0,0),p.default.addTo(this.node,function(t,e){return r.node.setAbsoluteSize(t,e)}),a.setProperty("overflow-y","scroll").setProperty("overflow-x","hidden").setProperty("-webkit-overflow-scrolling","touch")}return i(t,[{key:"reflow",value:function(){var t=c.default(),e=t.w,r=t.h;this.node.setAbsoluteSize(e,r)}}],[{key:"add",value:function(e){return new t(e)}}]),t}();r.default=f,e.exports=r.default},{"../components/ResizeListener":107,"../createDOMElement":109,"../getViewportSize":113,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/interop-require-default":10}],119:[function(t,e,r){"use strict";var i=t("babel-runtime/helpers/inherits").default,n=t("babel-runtime/helpers/get").default,s=t("babel-runtime/helpers/create-class").default,o=t("babel-runtime/helpers/class-call-check").default,a=t("babel-runtime/core-js/object/define-property").default,u=t("babel-runtime/core-js/symbol").default,h=t("babel-runtime/helpers/interop-require-default").default;a(r,"__esModule",{value:!0});var c=t("../calculator"),l=h(c),p=t("../loadImage"),f=h(p),d=t("../components/Mover"),m=h(d),_=t("./Image"),g=h(_),y=t("../components/ResizeListener"),v=h(y),b=t("../components/Scaler"),w=h(b),x=u("get path"),E=u("get start coordinates"),T=u("get target coordinates"),S=u("get size"),C=function(t){function e(t,r,i){var s=this;o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r,e[S](),e[E](i)),m.default.addTo(this.node,e[T](i)).start(),v.default.addTo(this.node,function(){w.default.addTo(s.node,e[S]()).start(),m.default.addTo(s.node,e[T](i)).start()})}return i(e,t),s(e,null,[{key:"add",value:function(t,r){var i=e[x](r);return f.default(i).then(function(){return new e(t,i,r)}).catch(function(t){throw new Error("Error adding thumbnail "+i+": "+t.message)})}},{key:S,value:function(){return l.default.getThumbnailSize()}},{key:E,value:function(t){return{x:l.default.isOddRow(t)?-1*e[S]().w:l.default.getGallerySize().w,y:e[T](t).y}}},{key:T,value:function(t){return l.default.getPixelCoords(t)}},{key:x,value:function(t){return"./images/car"+("000"+(t+1)).slice(-3)+".jpg"}}]),e}(g.default);r.default=C,e.exports=r.default},{"../calculator":105,"../components/Mover":106,"../components/ResizeListener":107,"../components/Scaler":108,"../loadImage":115,"./Image":116,"babel-runtime/core-js/object/define-property":2,"babel-runtime/core-js/symbol":5,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/get":8,"babel-runtime/helpers/inherits":9,"babel-runtime/helpers/interop-require-default":10}],120:[function(t,e,r){"use strict";function i(t){return function e(r,i){window.setTimeout(function(){return t()?void e(r,i):(r(),void i())},c)}}function n(t){var e=t();return function(){var r=t();return e!==r?(e=r,!0):!1}}function s(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var s=n(function(){return h.default().h}),o=n(function(){return h.default().w}),a=i(function(){return o()||s()});!function t(){window.onresize=function(){window.onresize=null,a(function(){return e.forEach(function(t){return t()})},t)}}()}var o=t("babel-runtime/core-js/object/define-property").default,a=t("babel-runtime/helpers/interop-require-default").default;o(r,"__esModule",{value:!0});var u=t("./getViewportSize"),h=a(u),c=100;r.default=s,e.exports=r.default},{"./getViewportSize":113,"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/interop-require-default":10}],121:[function(t,e,r){"use strict";var i=t("babel-runtime/core-js/object/define-property").default,n=t("babel-runtime/helpers/interop-require-default").default;i(r,"__esModule",{value:!0});var s=t("famous/core/FamousEngine"),o=n(s);o.default.init(),r.default=o.default.createScene(),e.exports=r.default},{"babel-runtime/core-js/object/define-property":2,"babel-runtime/helpers/interop-require-default":10,"famous/core/FamousEngine":55}],122:[function(t,e,r){"use strict";var i=t("babel-runtime/core-js/object/define-property").default;i(r,"__esModule",{value:!0}),r.default={targetThumbnailWidth:240,thumbnailAspectRatio:.75,numberOfThumbnails:100},e.exports=r.default},{"babel-runtime/core-js/object/define-property":2}]},{},[114]);
